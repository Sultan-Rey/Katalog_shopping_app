{"version":3,"sources":["./src/app/verification/verification.page.html","./src/app/verification/verification.page.scss","./src/app/verification/verification.module.ts","./src/app/verification/verification-routing.module.ts","./src/app/verification/verification.page.ts"],"names":[],"mappings":"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","file":"verification-verification-module-es2015.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons style=\\\"margin-top:5%;\\\" slot=\\\"start\\\">\\n    </ion-buttons>\\n    <ion-title  class=\\\"width\\\" mode=ios >\\n      <ion-text size=\\\"LARGE\\\" color=\\\"warning\\\">\\n        K</ion-text>\\n        <ion-text color=\\\"danger\\\"><ion-icon size=\\\"LARGE\\\" name=cart></ion-icon></ion-text>\\n        <ion-text >ta</ion-text><img title=\\\"app icon\\\" class=\\\"icon\\\" src=\\\"assets/icon/lipstick.png\\\"/><ion-text>og</ion-text>\\n      </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-img id=\\\"img\\\" src=\\\"assets/images/welcome.gif\\\"></ion-img>\\n  \\n    <p id=\\\"mail_link\\\" class=\\\"paragraph\\\">\\n      A verification link was sent to your email adress: {{credential.mail}} please, verify it.\\n    </p>\\n   \\n    \\n   <ion-button class=\\\"center\\\" (click)=\\\"verification()\\\">Start Shopping now</ion-button>   \\n \\n</ion-content>\\n\";","export default \".icon {\\n  width: 15px;\\n  height: 23px;\\n  border: none;\\n  padding: 2px;\\n}\\n\\n.width {\\n  font-size: 26px;\\n}\\n\\n#code {\\n  display: block;\\n  margin: auto;\\n  padding-bottom: 12%;\\n  width: 35%;\\n}\\n\\n.input {\\n  font-size: 14px;\\n  font-weight: bolder;\\n  text-align: center;\\n}\\n\\nsection {\\n  margin-top: 1em;\\n  margin-bottom: 2.5em;\\n}\\n\\nsection:not(.full-width),\\n.full-width > header {\\n  padding: 0 10px;\\n}\\n\\n.paragraph {\\n  display: block;\\n  padding: 20px;\\n  margin: 5px;\\n  font-family: \\\"Gill Sans\\\", \\\"Gill Sans MT\\\", Calibri, \\\"Trebuchet MS\\\", sans-serif;\\n  font-size: 18px;\\n  text-align: justify;\\n}\\n\\n.my-custom-class {\\n  --background: #222;\\n  --spinner-color: #fff;\\n  color: #fff;\\n}\\n\\n.center {\\n  margin-left: 25%;\\n  margin-right: 25%;\\n  padding: auto;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvdmVyaWZpY2F0aW9uL3ZlcmlmaWNhdGlvbi5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxXQUFBO0VBQ0EsWUFBQTtFQUNBLFlBQUE7RUFDQSxZQUFBO0FBQ0o7O0FBQ0U7RUFDRSxlQUFBO0FBRUo7O0FBQUU7RUFDRSxjQUFBO0VBQ0EsWUFBQTtFQUNBLG1CQUFBO0VBQ0EsVUFBQTtBQUdKOztBQUFFO0VBQ0UsZUFBQTtFQUNBLG1CQUFBO0VBQ0Esa0JBQUE7QUFHSjs7QUFBRTtFQUNFLGVBQUE7RUFDQSxvQkFBQTtBQUdKOztBQURFOztFQUVFLGVBQUE7QUFJSjs7QUFERTtFQUNFLGNBQUE7RUFDQSxhQUFBO0VBQ0EsV0FBQTtFQUNBLDZFQUFBO0VBQ0EsZUFBQTtFQUNBLG1CQUFBO0FBSUo7O0FBRkU7RUFDRSxrQkFBQTtFQUNBLHFCQUFBO0VBRUEsV0FBQTtBQUlKOztBQUZDO0VBQ0UsZ0JBQUE7RUFDQSxpQkFBQTtFQUNBLGFBQUE7QUFLSCIsImZpbGUiOiJzcmMvYXBwL3ZlcmlmaWNhdGlvbi92ZXJpZmljYXRpb24ucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmljb257XG4gICAgd2lkdGg6IDE1cHg7XG4gICAgaGVpZ2h0OiAyM3B4O1xuICAgIGJvcmRlcjogbm9uZTtcbiAgICBwYWRkaW5nOjJweDtcbiAgfVxuICAud2lkdGh7XG4gICAgZm9udC1zaXplOiAyNnB4O1xuICB9XG4gICNjb2Rle1xuICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgIG1hcmdpbjogYXV0bztcbiAgICBwYWRkaW5nLWJvdHRvbTogMTIlO1xuICAgIHdpZHRoOiAzNSU7XG4gIH1cblxuICAuaW5wdXR7XG4gICAgZm9udC1zaXplOiAxNHB4O1xuICAgIGZvbnQtd2VpZ2h0OiBib2xkZXI7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyXG4gIH1cblxuICBzZWN0aW9uIHtcbiAgICBtYXJnaW4tdG9wOiAxZW07XG4gICAgbWFyZ2luLWJvdHRvbTogMi41ZW07XG4gIH1cbiAgc2VjdGlvbjpub3QoLmZ1bGwtd2lkdGgpLFxuICAuZnVsbC13aWR0aCA+IGhlYWRlciB7XG4gICAgcGFkZGluZzogMCAxMHB4O1xuICB9XG5cbiAgLnBhcmFncmFwaHtcbiAgICBkaXNwbGF5OiBibG9jaztcbiAgICBwYWRkaW5nOiAyMHB4O1xuICAgIG1hcmdpbjogNXB4O1xuICAgIGZvbnQtZmFtaWx5OiAnR2lsbCBTYW5zJywgJ0dpbGwgU2FucyBNVCcsIENhbGlicmksICdUcmVidWNoZXQgTVMnLCBzYW5zLXNlcmlmO1xuICAgIGZvbnQtc2l6ZTogMThweDtcbiAgICB0ZXh0LWFsaWduOiBqdXN0aWZ5O1xuICB9XG4gIC5teS1jdXN0b20tY2xhc3Mge1xuICAgIC0tYmFja2dyb3VuZDogIzIyMjtcbiAgICAtLXNwaW5uZXItY29sb3I6ICNmZmY7XG4gIFxuICAgIGNvbG9yOiAjZmZmO1xuICB9XG4gLmNlbnRlcntcbiAgIG1hcmdpbi1sZWZ0OiAyNSU7XG4gICBtYXJnaW4tcmlnaHQ6IDI1JTtcbiAgIHBhZGRpbmc6IGF1dG87XG4gfSJdfQ== */\";","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { ReactiveFormsModule} from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { VerificationPageRoutingModule } from './verification-routing.module';\n\nimport { VerificationPage } from './verification.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    VerificationPageRoutingModule,\n    ReactiveFormsModule\n  ],\n  declarations: [VerificationPage]\n})\nexport class VerificationPageModule {}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { VerificationPage } from './verification.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: VerificationPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class VerificationPageRoutingModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, NavigationExtras, Router } from '@angular/router';\nimport { Product } from 'src/models/product';\nimport { FormBuilder, Validators } from '@angular/forms';\nimport { AngularFirestore } from '@angular/fire/firestore';\nimport { AngularFireAuth} from '@angular/fire/auth';\nimport { AlertController, LoadingController } from '@ionic/angular';\nimport { Storage } from '@ionic/storage';\nimport * as firebase from 'firebase';\nimport { User } from 'src/models/user';\nimport { isNullOrUndefined } from 'util';\n\n@Component({\n  selector: 'app-verification',\n  templateUrl: './verification.page.html',\n  styleUrls: ['./verification.page.scss'],\n})\nexport class VerificationPage implements OnInit {\n  data: Product|'';\n  user: User;\n  credential = {\n    mail: '',\n    password: '',\n    phone: ''\n  };\n  \n  phone: string;\n  state = true;\n  constructor(private route: ActivatedRoute, private router: Router, private formBuilder: FormBuilder,\n              private afs: AngularFirestore, public loadingController: LoadingController,\n              private storage: Storage, private afAuth: AngularFireAuth, private alertcontroller: AlertController)\n               {}\n\n  verificationForm = this.formBuilder.group({\n    verifiedcode: ['', [Validators.required, Validators.pattern('^[0-9]{6}(?:-[0-9]{4})?$')]]\n  });\n  ngOnInit() {\n    this.route.queryParams.subscribe(params => {\n      if (this.router.getCurrentNavigation().extras.state) {\n        this.data = this.router.getCurrentNavigation().extras.state.order;\n        this.user = this.router.getCurrentNavigation().extras.state.info;\n        this.signin(this.user);\n\n      }\n    });\n  }\n\n  \n\n\n \n async sms_preference(){\n    if(this.user.address.phone!==\"\" && this.user.address.phone!==null){\n      const alert = await this.alertcontroller.create({\n        cssClass: 'my-custom-class',\n            header: 'Alert',\n            subHeader: 'Verification',\n            message: 'Code has been sent to '+this.user.address.phone,\n            buttons: ['Ok']\n      });\n      await alert.present();\n      document.getElementById(\"sms_code\").style.display=\"block\";\n      document.getElementById(\"mail_link\").style.display=\"none;\"\n    }else{\n      const alert = await this.alertcontroller.create({\n        cssClass: 'my-custom-class',\n            header: 'Alert',\n            subHeader: 'Verification',\n            message: 'No phone number found, please verify by email. ',\n            buttons: ['Ok']\n      });\n      await alert.present();\n    }\n    \n    \n\n  }\n  async signin(\n    user: User\n  ): Promise<firebase.auth.UserCredential> {\n    try {\n      const newUserCredential: firebase.auth.UserCredential = await this.afAuth.createUserWithEmailAndPassword(\n        user.email.trim(),\n        user.password.trim()\n      );\n      await this.afs\n        .doc(`user/${newUserCredential.user.uid}`)\n        .set(user).then(async ()=>{this.storage.set(\"user\",user);\n        await newUserCredential.user.sendEmailVerification();\n      }).catch(err=>{newUserCredential.user.delete();this.msg_networkfailure(); this.storage.remove(\"user\");});\n      return newUserCredential;\n      \n    } catch (error) {\n       this.msg_networkfailure();\n    }\n  }\n\n async msg_networkfailure(){\n    const alert = await this.alertcontroller.create({\n      cssClass: 'my-custom-class',\n      header: 'Alert',\n      subHeader: 'Verification',\n      message: 'If your email address is correct please verify your network connection. ',\n      buttons: ['Ok']\n    }).then((alertview)=>{\n       alertview.present();\n       alertview.onDidDismiss().then(()=>{})\n    }).catch(error=>{ throw error});\n  }\n  verification(){\n    this.afAuth.authState.subscribe(user=>{\n      if(user.emailVerified){\n        const navigationExtras: NavigationExtras = {\n          state: {\n            order: this.data\n          }\n        };\n        if (!isNullOrUndefined(this.data)) {\n          this.router.navigate(['/place-order'], navigationExtras);\n        } else {\n          this.router.navigate(['/home']);\n        }\n      }\n    });\n    \n  }\n\n  redirectTo(){\n    if (this.data !== ''){\n      const navigationExtras: NavigationExtras = {\n        state: {\n          product: this.data\n        }\n      };\n      this.router.navigate(['/place-order'], navigationExtras);\n    }else{\n      this.state = false;\n    }\n  }\n\n}\n"],"sourceRoot":"webpack:///"}