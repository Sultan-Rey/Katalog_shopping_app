{"version":3,"sources":["webpack:///src/app/login/login.page.ts","webpack:///src/app/login/login.page.html","webpack:///src/app/login/login.module.ts","webpack:///src/app/login/login-routing.module.ts","webpack:///src/app/login/login.page.scss"],"names":["LoginPage","route","router","storage","afAuth","loadingcontroller","alertcontroller","afirestore","dataUser","mail","password","queryParams","subscribe","params","getCurrentNavigation","extras","state","data","order","returnway","create","cssClass","message","duration","then","control","present","signInWithEmailAndPassword","trim","currentUser","emailVerified","uid","toString","set","navigationExtras","dismiss","navigate","rejection","onWillDismiss","load","role","header","subHeader","buttons","alert","selector","template","LoginPageModule","imports","declarations","routes","path","component","LoginPageRoutingModule","forChild","exports"],"mappings":"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","file":"login-login-module-es5.js","sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport {ActivatedRoute, Router, NavigationExtras} from '@angular/router';\nimport { AngularFireAuth} from '@angular/fire/auth';\nimport { Order } from 'src/models/order';\nimport { AlertController, LoadingController } from '@ionic/angular';\nimport { Storage} from '@ionic/storage';\nimport { ControlContainer } from '@angular/forms';\nimport { AngularFirestore } from '@angular/fire/firestore';\nimport { User } from 'src/models/user';\nimport { isNullOrUndefined } from 'util';\n\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.page.html',\n  styleUrls: ['./login.page.scss'],\n})\nexport class LoginPage implements OnInit {\n\n  user: User;\n  dataUser = {\n    mail: '',\n    password: ''\n  };\n  data: Order|'';\n  returnway: '/home';\n  constructor(private route: ActivatedRoute, private router: Router, private storage: Storage,\n              private afAuth: AngularFireAuth, private loadingcontroller: LoadingController,\n              private alertcontroller: AlertController, private afirestore: AngularFirestore) { }\n\n  ngOnInit() {\n    this.route.queryParams.subscribe(params => {\n      if (this.router.getCurrentNavigation().extras.state) {\n        this.data = this.router.getCurrentNavigation().extras.state.order;\n        this.returnway = this.router.getCurrentNavigation().extras.state.route;\n      }\n    });\n  }\n\n  async login(data: any){\n    \n       await this.loadingcontroller.create({\n        cssClass: 'my-custom-class',\n        message: 'Please wait...',\n        duration: 5000\n       }).then( async (control)=>{\n         control.present();\n         \n         this.afAuth.signInWithEmailAndPassword(data.mail.trim(), data.password.trim()).then(async () => {\n          this.dataUser = {mail: '',password: ''};\n            \n            if((await this.afAuth.currentUser).emailVerified){\n              this.storage.set(\"user\", (await this.afAuth.currentUser).uid.toString())\n              const navigationExtras: NavigationExtras = {\n                state: {\n                  order: this.data\n                }\n              };\n              control.dismiss();\n              if(!isNullOrUndefined(this.data)){\n                this.router.navigate(['/place-order'], navigationExtras);\n              }else{ \n                this.router.navigate(['/home']);\n            }\n            \n          }\n          \n          }).catch(rejection=>{control.dismiss(rejection, \"alert\");});\n      \n         control.onWillDismiss().then(async (load)=>{\n          if(load.role ==\"alert\"){\n            const alert = await this.alertcontroller.create({\n              cssClass: 'my-custom-class',\n              header: 'Alert',\n              subHeader: 'Network Error',\n              message: 'Login failed'+load.data,\n              buttons: ['Ok']\n            });\n            await alert.present();\n          }\n           \n          });//loading dismissed()\n       });\n  }\n\n  toSignUp(){\n    const navigationExtras: NavigationExtras = {\n      state: {\n        order: this.data\n      }\n    };\n    this.router.navigate(['/signup'], navigationExtras);\n  }\n}\n","export default \"<ion-header>\\n  <ion-toolbar style=\\\" --background: #031432;\\\">\\n    <ion-buttons  slot=\\\"start\\\">\\n      <ion-back-button color=\\\"light\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-buttons routerLink=\\\"/home\\\" routerDirection=\\\"back\\\">\\n      <ion-title class=\\\"width\\\">\\n        <ion-text size=\\\"LARGE\\\" color=\\\"warning\\\">\\n          K</ion-text>\\n        <ion-text color=\\\"danger\\\">\\n          <ion-icon size=\\\"LARGE\\\" name=cart></ion-icon>\\n        </ion-text>\\n        <ion-text color=\\\"light\\\">TALOG</ion-text>\\n      </ion-title>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n \\n  <div class=\\\"container\\\" style=\\\"padding-top: 50px;\\\">\\n    <ion-card class=\\\"container p-4\\\">\\n      <ion-title class=\\\"ion-padding\\\">\\n        <ion-img style=\\\"width:100px;height: 100px; margin: auto;\\\" src=\\\"../../assets/icon/katalog_round_icon.PNG\\\"></ion-img>\\n    </ion-title>\\n    <ion-item>\\n      <ion-icon slot=\\\"start\\\" name=\\\"person\\\"></ion-icon>\\n      <ion-label position=\\\"floating\\\">Email or number phone</ion-label>\\n      <ion-input type=\\\"text\\\" [(ngModel)]=\\\"dataUser.mail\\\" ></ion-input>\\n    </ion-item>\\n \\n    <ion-item>\\n      <ion-icon slot=\\\"start\\\" name=\\\"lock-closed\\\"></ion-icon>\\n      <ion-label position=\\\"floating\\\">Password</ion-label>\\n      <ion-input type=\\\"password\\\" [(ngModel)]=\\\"dataUser.password\\\"></ion-input>\\n    </ion-item>\\n    <section>\\n      <ion-button expand=\\\"block\\\" (click)=\\\"login(dataUser)\\\">Connexion</ion-button>\\n      <div class=\\\"forgot\\\">\\n      <ion-text>\\n        <ion-label>Password forgot?</ion-label>\\n      </ion-text>\\n    </div>\\n    </section>\\n\\n  <div id=\\\"signup\\\">\\n    <ion-label  color=\\\"primary\\\" (click)=\\\"toSignUp()\\\">I don't have account, signup for free</ion-label>\\n</div>\\n    </ion-card>\\n       \\n</div>\\n\\n</ion-content>\";","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { LoginPageRoutingModule } from './login-routing.module';\n\nimport { LoginPage } from './login.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    LoginPageRoutingModule\n  ],\n  declarations: [LoginPage]\n})\nexport class LoginPageModule {}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { LoginPage } from './login.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: LoginPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class LoginPageRoutingModule {}\n","export default \".icon {\\n  width: 20px;\\n  height: 28px;\\n  border: none;\\n  padding: 2px;\\n}\\n\\n.width {\\n  font-size: 26px;\\n}\\n\\n.container ion-item {\\n  width: 90%;\\n  margin-left: auto;\\n  margin-right: auto;\\n  padding: auto;\\n}\\n\\n#img {\\n  width: 60%;\\n  margin-left: auto;\\n  margin-right: auto;\\n  padding: auto;\\n}\\n\\n.forgot {\\n  float: right;\\n}\\n\\n.forgot ion-label {\\n  font-size: 14px;\\n  color: #c8c8c8;\\n  margin-top: 10px;\\n}\\n\\nsection {\\n  margin-top: 1em;\\n  margin-bottom: 2.5em;\\n}\\n\\nsection:not(.full-width),\\n.full-width > header {\\n  padding: 0 10px;\\n}\\n\\n#signup {\\n  width: 100%;\\n  text-align: center;\\n  margin-top: 50px;\\n}\\n\\n.my-custom-class {\\n  --background: #222;\\n  --spinner-color: #fff;\\n  color: #fff;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbG9naW4vbG9naW4ucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksV0FBQTtFQUNBLFlBQUE7RUFDQSxZQUFBO0VBQ0EsWUFBQTtBQUNKOztBQUNFO0VBQ0UsZUFBQTtBQUVKOztBQUNDO0VBQ0ssVUFBQTtFQUNBLGlCQUFBO0VBQ0Esa0JBQUE7RUFDQSxhQUFBO0FBRU47O0FBQUU7RUFDSSxVQUFBO0VBQ0EsaUJBQUE7RUFDQSxrQkFBQTtFQUNBLGFBQUE7QUFHTjs7QUFERTtFQUNJLFlBQUE7QUFJTjs7QUFGRTtFQUNJLGVBQUE7RUFDQSxjQUFBO0VBQ0EsZ0JBQUE7QUFLTjs7QUFGRTtFQUNFLGVBQUE7RUFDQSxvQkFBQTtBQUtKOztBQUZFOztFQUVFLGVBQUE7QUFLSjs7QUFGRTtFQUNJLFdBQUE7RUFDQSxrQkFBQTtFQUNBLGdCQUFBO0FBS047O0FBSE07RUFDRSxrQkFBQTtFQUNBLHFCQUFBO0VBRUEsV0FBQTtBQUtSIiwiZmlsZSI6InNyYy9hcHAvbG9naW4vbG9naW4ucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmljb257XG4gICAgd2lkdGg6IDIwcHg7XG4gICAgaGVpZ2h0OiAyOHB4O1xuICAgIGJvcmRlcjogbm9uZTtcbiAgICBwYWRkaW5nOjJweDtcbiAgfVxuICAud2lkdGh7XG4gICAgZm9udC1zaXplOiAyNnB4O1xuICB9XG5cbiAuY29udGFpbmVyIGlvbi1pdGVtIHtcbiAgICAgIHdpZHRoOiA5MCU7XG4gICAgICBtYXJnaW4tbGVmdDogYXV0bztcbiAgICAgIG1hcmdpbi1yaWdodDogYXV0bztcbiAgICAgIHBhZGRpbmc6IGF1dG87XG4gIH1cbiAgI2ltZ3tcbiAgICAgIHdpZHRoOiA2MCU7XG4gICAgICBtYXJnaW4tbGVmdDogYXV0bztcbiAgICAgIG1hcmdpbi1yaWdodDogYXV0bztcbiAgICAgIHBhZGRpbmc6IGF1dG87XG4gIH1cbiAgLmZvcmdvdHtcbiAgICAgIGZsb2F0OiByaWdodDtcbiAgfVxuICAuZm9yZ290IGlvbi1sYWJlbHtcbiAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgIGNvbG9yOiAjYzhjOGM4O1xuICAgICAgbWFyZ2luLXRvcDogMTBweDtcbiAgfVxuXG4gIHNlY3Rpb24ge1xuICAgIG1hcmdpbi10b3A6IDFlbTtcbiAgICBtYXJnaW4tYm90dG9tOiAyLjVlbTtcbiAgfVxuXG4gIHNlY3Rpb246bm90KC5mdWxsLXdpZHRoKSxcbiAgLmZ1bGwtd2lkdGggPiBoZWFkZXIge1xuICAgIHBhZGRpbmc6IDAgMTBweDtcbiAgfVxuXG4gICNzaWdudXB7XG4gICAgICB3aWR0aDogMTAwJTtcbiAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgIG1hcmdpbi10b3A6IDUwcHg7XG4gICAgICB9XG4gICAgICAubXktY3VzdG9tLWNsYXNzIHtcbiAgICAgICAgLS1iYWNrZ3JvdW5kOiAjMjIyO1xuICAgICAgICAtLXNwaW5uZXItY29sb3I6ICNmZmY7XG4gICAgICBcbiAgICAgICAgY29sb3I6ICNmZmY7XG4gICAgICB9Il19 */\";"]}