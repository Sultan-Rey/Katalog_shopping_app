(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{v35Q:function(t,e,i){"use strict";i.r(e),i.d(e,"CartPageModule",(function(){return O}));var n=i("ofXK"),o=i("3Pt+"),c=i("TEn/"),r=i("tyNb"),s=i("mrSG"),b=i("fXoL"),a=i("UbTl"),l=i("e8h1"),h=i("zAId");function p(t,e){if(1&t&&(b.Nb(0,"ion-badge",23),b.pc(1),b.Mb()),2&t){const t=b.Xb().$implicit,e=b.Xb();b.yb(1),b.rc("Only ",e.checkQty(t)," left")}}function d(t,e){if(1&t){const t=b.Ob();b.Lb(0),b.Nb(1,"ion-item",15),b.Nb(2,"ion-img",16),b.Vb("click",(function(){b.ic(t);const i=e.$implicit;return b.Xb().goTo(i)})),b.Mb(),b.Nb(3,"ion-item-group"),b.Nb(4,"ion-item"),b.Nb(5,"ion-label"),b.Nb(6,"div"),b.Nb(7,"ion-buttons"),b.Nb(8,"ion-text"),b.pc(9),b.Yb(10,"currency"),b.Mb(),b.nc(11,p,2,1,"ion-badge",12),b.Mb(),b.Nb(12,"h6",17),b.Vb("click",(function(){b.ic(t);const i=e.$implicit;return b.Xb().goTo(i)})),b.pc(13),b.Mb(),b.Nb(14,"ion-label"),b.Nb(15,"h6"),b.pc(16),b.Mb(),b.Mb(),b.Nb(17,"ion-buttons"),b.Nb(18,"div",18),b.Nb(19,"ion-button",19),b.Vb("click",(function(){b.ic(t);const i=e.$implicit;return b.Xb().adjustqty("minus",i)})),b.pc(20,"-"),b.Mb(),b.Nb(21,"ion-label"),b.pc(22),b.Mb(),b.Nb(23,"ion-button",19),b.Vb("click",(function(){b.ic(t);const i=e.$implicit;return b.Xb().adjustqty("plus",i)})),b.pc(24,"+"),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Nb(25,"div",20),b.Nb(26,"button",21),b.Vb("click",(function(){b.ic(t);const i=e.$implicit;return b.Xb().savedForLater(i)})),b.pc(27,"Save for later"),b.Mb(),b.Nb(28,"button",22),b.Vb("click",(function(){b.ic(t);const i=e.$implicit;return b.Xb().remove(i)})),b.pc(29,"Remove"),b.Mb(),b.Mb(),b.Mb(),b.Kb()}if(2&t){const t=e.$implicit,i=b.Xb();b.yb(2),b.cc("src",t.picture),b.yb(7),b.qc(b.Zb(10,6,t.price)),b.yb(2),b.cc("ngIf",i.checkQty(t)<10&&i.checkQty(t)>1),b.yb(2),b.qc(t.name),b.yb(3),b.qc(t.description),b.yb(6),b.qc(t.qty)}}function g(t,e){if(1&t&&(b.Lb(0),b.Nb(1,"ion-slide",25),b.Nb(2,"ion-item-group"),b.Jb(3,"ion-img",26),b.Nb(4,"ion-row"),b.Nb(5,"ion-badge",23),b.Nb(6,"h5"),b.pc(7),b.Yb(8,"currency"),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Kb()),2&t){const t=e.$implicit;b.yb(3),b.cc("src",t.models[0].pictures[0]),b.yb(4),b.qc(b.Zb(8,2,t.caracteristic[0].price))}}const f=function(){return{slidesPerView:"3",zoom:!1,grabCursor:!0}};function u(t,e){if(1&t&&(b.Lb(0),b.Nb(1,"ion-slides",24),b.nc(2,g,9,4,"ng-container",8),b.Mb(),b.Kb()),2&t){const t=b.Xb();b.yb(1),b.cc("options",b.ec(2,f)),b.yb(1),b.cc("ngForOf",t.browsing)}}function m(t,e){1&t&&(b.Nb(0,"div",27),b.Nb(1,"ion-button",28),b.pc(2,"Browsing Historic empty, start shopping now!"),b.Mb(),b.Mb())}function y(t,e){1&t&&(b.Nb(0,"ion-chip",23),b.Jb(1,"ion-icon",29),b.Nb(2,"h4"),b.pc(3,"No internet connection"),b.Mb(),b.Mb())}function M(t,e){if(1&t&&(b.Nb(0,"ion-badge",23),b.pc(1),b.Mb()),2&t){const t=b.Xb().$implicit,e=b.Xb();b.yb(1),b.rc("Only ",e.checkQty(t)," left")}}function N(t,e){if(1&t){const t=b.Ob();b.Nb(0,"ion-item",15),b.Nb(1,"ion-img",30),b.Vb("click",(function(){b.ic(t);const i=e.$implicit;return b.Xb().goTo(i)})),b.Mb(),b.Nb(2,"ion-item-group"),b.Nb(3,"ion-item"),b.Nb(4,"ion-label"),b.Nb(5,"div"),b.Nb(6,"ion-buttons"),b.Nb(7,"ion-text"),b.pc(8),b.Yb(9,"currency"),b.Mb(),b.nc(10,M,2,1,"ion-badge",12),b.Mb(),b.Nb(11,"h6"),b.pc(12),b.Mb(),b.Nb(13,"ion-label"),b.Nb(14,"h6"),b.pc(15),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Nb(16,"ion-button",31),b.Vb("click",(function(){b.ic(t);const i=e.$implicit;return b.Xb().moveToCart(i)})),b.pc(17,"Move to Cart"),b.Mb(),b.Mb(),b.Mb()}if(2&t){const t=e.$implicit,i=b.Xb();b.yb(1),b.cc("src",t.picture),b.yb(7),b.qc(b.Zb(9,5,t.price)),b.yb(2),b.cc("ngIf",i.checkQty(t)<10&&i.checkQty(t)>1),b.yb(2),b.qc(t.name),b.yb(3),b.qc(t.description)}}const v=[{path:"",component:(()=>{class t{constructor(t,e,i,n){this.toastconroller=t,this.router=e,this.fstoreService=i,this.storage=n,this.element="",this.browsing=[],this.cart=[],this.saved=[],this.isOnline=!1,this.orderQty=0,this.totalcost=0,this.getsavedforlater(),this.getCartItems(),this.getBrowsingHistoric()}ngOnInit(){this.nosaved=!1}checkForCartUpdate(){let t=this.fstoreService.getFirestoreData();const e=t.filter(t=>!this.cart.find(e=>t.description===e.description));console.log(e),console.log(t)}getCartItems(){this.totalcost=0,this.storage.get("cart").then(t=>{this.cart=t}).catch(t=>{console.log("cart not found or empty")})}getsavedforlater(){this.storage.get("savedforlater").then(t=>{this.saved=t,this.nosaved=!1}).catch(t=>{console.log("saved not found or empty"),this.nosaved=!0})}getBrowsingHistoric(){return this.storage.get("browsing").then(t=>{if(0!==t.length&&null!==t)for(let e of this.fstoreService.getFirestoreData())for(let i of t)e.name==i.name&&e.description==i.description&&this.browsing.push(e)}).catch(t=>{console.log("no browsing data found")}),this.browsing.reverse}adjustqty(t,e){"minus"===t&&1!==e.qty&&e.qty--,"plus"===t&&e.qty++,this.storage.set("cart",this.cart)}getTotal(){return this.cart.reduce((t,e)=>t+e.price*e.qty,0)}savedForLater(t){let e,i=!1;for(let n of this.cart)n===t&&(this.cart.splice(this.cart.indexOf(t),1),e=n,i=!0);if(i){let t=!1;this.storage.set("cart",this.cart),this.storage.get("savedforlater").then(i=>{if(null==i||0==i.length)(i=[]).push(e);else{for(let n of i)n==e&&(n.qty=e.qty,t=!0);t||i.push(e)}this.storage.set("savedforlater",i)})}this.getsavedforlater()}remove(t){let e=!1;for(let i of this.cart)i===t&&(this.cart.splice(this.cart.indexOf(i),1),e=!0);e&&this.storage.set("cart",this.cart)}moveToCart(t){let e=!1;for(let i of this.saved)i===t&&(this.saved.splice(this.saved.indexOf(t),1),this.cart.push(i),e=!0);e&&(this.storage.set("savedforlater",this.saved),this.storage.set("cart",this.cart))}crypto(){let t=Date.now();return"CA"+Math.floor(1e3*Math.random())+"-"+t}checkout(t){let e={};if(this.totalcost>0){e.goods_departure="Packaging with KATALOG team service",e.shipping_destination="",e.status="Not shipped yet",e.carrier="",e.trackingnumber="";let i={customerId:"code",orderId:this.crypto(),items:t,date_order:new Date(Date.now()),order_qty:this.orderQty,amount:this.getTotal(),shipment:e};this.router.navigate(["/place-order"],{state:{order:i}})}}goTo(t){this.item={};let e=!1;for(let i of this.fstoreService.getFirestoreData())i.name==t.name&&i.description==t.description&&(this.item=i,e=!0);e?this.router.navigate(["/product"],{state:{product:t}}):this.rejection()}checkQty(t){let e=10;for(let i of this.fstoreService.getFirestoreData())i.name==t.name&&i.description==t.description&&(e=i.qty);return e}rejection(){return Object(s.a)(this,void 0,void 0,(function*(){let t=yield this.toastconroller.create({message:"Sorry! product is no longer available",duration:3e3});yield t.present()}))}filter(){""!==this.element&&this.cart.filter(t=>t.name.includes(this.element))}}return t.\u0275fac=function(e){return new(e||t)(b.Ib(c.gb),b.Ib(r.g),b.Ib(a.a),b.Ib(l.b))},t.\u0275cmp=b.Cb({type:t,selectors:[["app-cart"]],decls:32,vars:8,consts:[["lines","none",1,"mt-2"],[2,"font-weight","bold"],["color","primary"],[2,"font-size","22px"],[1,"btn","btn-warning","btn-md",3,"click"],[1,"alert","alert-dark"],["name","cart","size","large"],[1,"container"],[4,"ngFor","ngForOf"],[1,"col-md-12","mt-3","border","p-4"],[4,"ngIf"],["class","alert alert-default",4,"ngIf"],["color","danger",4,"ngIf"],[1,"alert","alert-dark","mt-2"],["ion-button","","detail","true",4,"ngFor","ngForOf"],["ion-button","","detail","true"],["size","large",2,"width","110px","height","150px",3,"src","click"],[3,"click"],[1,"qty-selector"],["fill","clear",3,"click"],[1,"row"],[1,"mb-3","btn","btn-primary","btn-sm","btn-block",3,"click"],[1,"btn","btn-danger","btn-sm","btn-block",3,"click"],["color","danger"],[2,"margin-bottom","20px",3,"options"],[2,"margin","20px"],[2,"max-height","300px","max-width","300px",3,"src"],[1,"alert","alert-default"],["expand","block","fill","clear",1,"border"],["size","large","name","alert-circle"],["size","large",2,"width","115px","height","160px",3,"src","click"],["size","small",3,"click"]],template:function(t,e){1&t&&(b.Jb(0,"app-page-header"),b.Nb(1,"ion-content"),b.Nb(2,"ion-item",0),b.Nb(3,"ion-label"),b.Nb(4,"ion-buttons"),b.Nb(5,"ion-label",1),b.pc(6,"Total items cost : "),b.Mb(),b.Nb(7,"ion-text",2),b.Nb(8,"h3",3),b.pc(9),b.Yb(10,"currency"),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Nb(11,"button",4),b.Vb("click",(function(){return e.checkout(e.cart)})),b.pc(12,"Check out"),b.Mb(),b.Mb(),b.Nb(13,"div",5),b.Nb(14,"h3"),b.Jb(15,"ion-icon",6),b.pc(16,"Cart Items"),b.Mb(),b.Mb(),b.Nb(17,"div",7),b.Nb(18,"ion-list"),b.nc(19,d,30,8,"ng-container",8),b.Mb(),b.Mb(),b.Nb(20,"div",9),b.Nb(21,"h4"),b.pc(22,"Related to your recent Browsing Items"),b.Mb(),b.nc(23,u,3,3,"ng-container",10),b.nc(24,m,3,0,"div",11),b.nc(25,y,4,0,"ion-chip",12),b.Mb(),b.Nb(26,"div",13),b.Nb(27,"h3"),b.pc(28,"Save for later"),b.Mb(),b.Mb(),b.Nb(29,"div",7),b.Nb(30,"ion-list"),b.nc(31,N,18,7,"ion-item",14),b.Mb(),b.Mb(),b.Mb()),2&t&&(b.yb(9),b.qc(b.Zb(10,6,e.getTotal())),b.yb(10),b.cc("ngForOf",e.cart),b.yb(4),b.cc("ngIf",0!==e.browsing.length&&e.isOnline),b.yb(1),b.cc("ngIf",0==e.browsing.length&&e.isOnline),b.yb(1),b.cc("ngIf",!e.isOnline),b.yb(6),b.cc("ngForOf",e.saved))},directives:[h.a,c.q,c.y,c.B,c.h,c.R,c.v,c.C,n.l,n.m,c.w,c.A,c.g,c.f,c.M,c.L,c.G,c.o],pipes:[n.d],styles:["ion-item[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;font-family:Impact,Haettenschweiler,Arial Narrow Bold,sans-serif;font-size:12px}ion-item[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-around;margin-left:10px;font-family:sans-serif}h3[_ngcontent-%COMP%]{margin-left:15px}.alert[_ngcontent-%COMP%]{padding:0}"]}),t})()}];let w=(()=>{class t{}return t.\u0275mod=b.Gb({type:t}),t.\u0275inj=b.Fb({factory:function(e){return new(e||t)},imports:[[r.i.forChild(v)],r.i]}),t})();var k=i("l+lL");let O=(()=>{class t{}return t.\u0275mod=b.Gb({type:t}),t.\u0275inj=b.Fb({factory:function(e){return new(e||t)},imports:[[n.c,o.f,c.W,k.a,w]]}),t})()}}]);