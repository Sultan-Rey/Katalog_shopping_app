(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{"Kw+X":function(t,e,i){"use strict";i.r(e),i.d(e,"VerificationPageModule",(function(){return g}));var n=i("ofXK"),s=i("3Pt+"),r=i("TEn/"),o=i("tyNb"),a=i("mrSG"),c=i("MCLT"),l=i("fXoL"),d=i("I/3d"),u=i("e8h1"),h=i("UbJi");const b=[{path:"",component:(()=>{class t{constructor(t,e,i,n,r,o,a,c){this.route=t,this.router=e,this.formBuilder=i,this.afs=n,this.loadingController=r,this.storage=o,this.afAuth=a,this.alertcontroller=c,this.credential={mail:"",password:"",phone:""},this.state=!0,this.verificationForm=this.formBuilder.group({verifiedcode:["",[s.o.required,s.o.pattern("^[0-9]{6}(?:-[0-9]{4})?$")]]})}ngOnInit(){this.route.queryParams.subscribe(t=>{this.router.getCurrentNavigation().extras.state&&(this.data=this.router.getCurrentNavigation().extras.state.order,this.user=this.router.getCurrentNavigation().extras.state.info,this.signin(this.user))})}sms_preference(){return Object(a.a)(this,void 0,void 0,(function*(){if(""!==this.user.address.phone&&null!==this.user.address.phone){const t=yield this.alertcontroller.create({cssClass:"my-custom-class",header:"Alert",subHeader:"Verification",message:"Code has been sent to "+this.user.address.phone,buttons:["Ok"]});yield t.present(),document.getElementById("sms_code").style.display="block",document.getElementById("mail_link").style.display="none;"}else{const t=yield this.alertcontroller.create({cssClass:"my-custom-class",header:"Alert",subHeader:"Verification",message:"No phone number found, please verify by email. ",buttons:["Ok"]});yield t.present()}}))}signin(t){return Object(a.a)(this,void 0,void 0,(function*(){try{const e=yield this.afAuth.createUserWithEmailAndPassword(t.email.trim(),t.password.trim());return yield this.afs.doc("user/"+e.user.uid).set(t).then(()=>Object(a.a)(this,void 0,void 0,(function*(){this.storage.set("user",t),yield e.user.sendEmailVerification()}))).catch(t=>{e.user.delete(),this.msg_networkfailure(),this.storage.remove("user")}),e}catch(e){this.msg_networkfailure()}}))}msg_networkfailure(){return Object(a.a)(this,void 0,void 0,(function*(){yield this.alertcontroller.create({cssClass:"my-custom-class",header:"Alert",subHeader:"Verification",message:"If your email address is correct please verify your network connection. ",buttons:["Ok"]}).then(t=>{t.present(),t.onDidDismiss().then(()=>{})}).catch(t=>{throw t})}))}verification(){this.afAuth.authState.subscribe(t=>{if(t.emailVerified){const t={state:{order:this.data}};Object(c.isNullOrUndefined)(this.data)?this.router.navigate(["/home"]):this.router.navigate(["/place-order"],t)}})}redirectTo(){""!==this.data?this.router.navigate(["/place-order"],{state:{product:this.data}}):this.state=!1}}return t.\u0275fac=function(e){return new(e||t)(l.Ib(o.a),l.Ib(o.g),l.Ib(s.b),l.Ib(d.a),l.Ib(r.ab),l.Ib(u.b),l.Ib(h.a),l.Ib(r.a))},t.\u0275cmp=l.Cb({type:t,selectors:[["app-verification"]],decls:19,vars:1,consts:[["slot","start",2,"margin-top","5%"],["mode","ios",1,"width"],["size","LARGE","color","warning"],["color","danger"],["size","LARGE","name","cart"],["title","app icon","src","assets/icon/lipstick.png",1,"icon"],["id","img","src","assets/images/welcome.gif"],["id","mail_link",1,"paragraph"],[1,"center",3,"click"]],template:function(t,e){1&t&&(l.Nb(0,"ion-header"),l.Nb(1,"ion-toolbar"),l.Jb(2,"ion-buttons",0),l.Nb(3,"ion-title",1),l.Nb(4,"ion-text",2),l.pc(5," K"),l.Mb(),l.Nb(6,"ion-text",3),l.Jb(7,"ion-icon",4),l.Mb(),l.Nb(8,"ion-text"),l.pc(9,"ta"),l.Mb(),l.Jb(10,"img",5),l.Nb(11,"ion-text"),l.pc(12,"og"),l.Mb(),l.Mb(),l.Mb(),l.Mb(),l.Nb(13,"ion-content"),l.Jb(14,"ion-img",6),l.Nb(15,"p",7),l.pc(16),l.Mb(),l.Nb(17,"ion-button",8),l.Vb("click",(function(){return e.verification()})),l.pc(18,"Start Shopping now"),l.Mb(),l.Mb()),2&t&&(l.yb(16),l.rc(" A verification link was sent to your email adress: ",e.credential.mail," please, verify it. "))},directives:[r.u,r.X,r.h,r.W,r.T,r.v,r.q,r.w,r.g],styles:[".icon[_ngcontent-%COMP%]{width:15px;height:23px;border:none;padding:2px}.width[_ngcontent-%COMP%]{font-size:26px}#code[_ngcontent-%COMP%]{display:block;margin:auto;padding-bottom:12%;width:35%}.input[_ngcontent-%COMP%]{font-size:14px;font-weight:bolder;text-align:center}section[_ngcontent-%COMP%]{margin-top:1em;margin-bottom:2.5em}.full-width[_ngcontent-%COMP%] > header[_ngcontent-%COMP%], section[_ngcontent-%COMP%]:not(.full-width){padding:0 10px}.paragraph[_ngcontent-%COMP%]{display:block;padding:20px;margin:5px;font-family:Gill Sans,Gill Sans MT,Calibri,Trebuchet MS,sans-serif;font-size:18px;text-align:justify}.my-custom-class[_ngcontent-%COMP%]{--background:#222;--spinner-color:#fff;color:#fff}.center[_ngcontent-%COMP%]{margin-left:25%;margin-right:25%;padding:auto}"]}),t})()}];let p=(()=>{class t{}return t.\u0275mod=l.Gb({type:t}),t.\u0275inj=l.Fb({factory:function(e){return new(e||t)},imports:[[o.i.forChild(b)],o.i]}),t})(),g=(()=>{class t{}return t.\u0275mod=l.Gb({type:t}),t.\u0275inj=l.Fb({factory:function(e){return new(e||t)},imports:[[n.c,s.f,r.Y,p,s.m]]}),t})()}}]);