!function(){function t(t,n){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function(t,n){if(!t)return;if("string"==typeof t)return e(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return e(t,n)}(t))||n&&t&&"number"==typeof t.length){i&&(t=i);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,a=!0,s=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return a=t.done,t},e:function(t){s=!0,c=t},f:function(){try{a||null==i.return||i.return()}finally{if(s)throw c}}}}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{v35Q:function(e,r,o){"use strict";o.r(r),o.d(r,"CartPageModule",(function(){return F}));var c=o("ofXK"),a=o("3Pt+"),s=o("TEn/"),b=o("tyNb"),l=o("mrSG"),u=o("fXoL"),f=o("UbTl"),h=o("e8h1"),p=o("zAId");function d(t,e){if(1&t&&(u.Nb(0,"ion-badge",23),u.pc(1),u.Mb()),2&t){var n=u.Xb().$implicit,i=u.Xb();u.yb(1),u.rc("Only ",i.checkQty(n)," left")}}function g(t,e){if(1&t){var n=u.Ob();u.Lb(0),u.Nb(1,"ion-item",15),u.Nb(2,"ion-img",16),u.Vb("click",(function(){u.ic(n);var t=e.$implicit;return u.Xb().goTo(t)})),u.Mb(),u.Nb(3,"ion-item-group"),u.Nb(4,"ion-item"),u.Nb(5,"ion-label"),u.Nb(6,"div"),u.Nb(7,"ion-buttons"),u.Nb(8,"ion-text"),u.pc(9),u.Yb(10,"currency"),u.Mb(),u.nc(11,d,2,1,"ion-badge",12),u.Mb(),u.Nb(12,"h6",17),u.Vb("click",(function(){u.ic(n);var t=e.$implicit;return u.Xb().goTo(t)})),u.pc(13),u.Mb(),u.Nb(14,"ion-label"),u.Nb(15,"h6"),u.pc(16),u.Mb(),u.Mb(),u.Nb(17,"ion-buttons"),u.Nb(18,"div",18),u.Nb(19,"ion-button",19),u.Vb("click",(function(){u.ic(n);var t=e.$implicit;return u.Xb().adjustqty("minus",t)})),u.pc(20,"-"),u.Mb(),u.Nb(21,"ion-label"),u.pc(22),u.Mb(),u.Nb(23,"ion-button",19),u.Vb("click",(function(){u.ic(n);var t=e.$implicit;return u.Xb().adjustqty("plus",t)})),u.pc(24,"+"),u.Mb(),u.Mb(),u.Mb(),u.Mb(),u.Mb(),u.Mb(),u.Mb(),u.Nb(25,"div",20),u.Nb(26,"button",21),u.Vb("click",(function(){u.ic(n);var t=e.$implicit;return u.Xb().savedForLater(t)})),u.pc(27,"Save for later"),u.Mb(),u.Nb(28,"button",22),u.Vb("click",(function(){u.ic(n);var t=e.$implicit;return u.Xb().remove(t)})),u.pc(29,"Remove"),u.Mb(),u.Mb(),u.Mb(),u.Kb()}if(2&t){var i=e.$implicit,r=u.Xb();u.yb(2),u.cc("src",i.picture),u.yb(7),u.qc(u.Zb(10,6,i.price)),u.yb(2),u.cc("ngIf",r.checkQty(i)<10&&r.checkQty(i)>1),u.yb(2),u.qc(i.name),u.yb(3),u.qc(i.description),u.yb(6),u.qc(i.qty)}}function v(t,e){if(1&t&&(u.Lb(0),u.Nb(1,"ion-slide",25),u.Nb(2,"ion-item-group"),u.Jb(3,"ion-img",26),u.Nb(4,"ion-row"),u.Nb(5,"ion-badge",23),u.Nb(6,"h5"),u.pc(7),u.Yb(8,"currency"),u.Mb(),u.Mb(),u.Mb(),u.Mb(),u.Mb(),u.Kb()),2&t){var n=e.$implicit;u.yb(3),u.cc("src",n.models[0].pictures[0]),u.yb(4),u.qc(u.Zb(8,2,n.caracteristic[0].price))}}var y=function(){return{slidesPerView:"3",zoom:!1,grabCursor:!0}};function m(t,e){if(1&t&&(u.Lb(0),u.Nb(1,"ion-slides",24),u.nc(2,v,9,4,"ng-container",8),u.Mb(),u.Kb()),2&t){var n=u.Xb();u.yb(1),u.cc("options",u.ec(2,y)),u.yb(1),u.cc("ngForOf",n.browsing)}}function M(t,e){1&t&&(u.Nb(0,"div",27),u.Nb(1,"ion-button",28),u.pc(2,"Browsing Historic empty, start shopping now!"),u.Mb(),u.Mb())}function N(t,e){1&t&&(u.Nb(0,"ion-chip",23),u.Jb(1,"ion-icon",29),u.Nb(2,"h4"),u.pc(3,"No internet connection"),u.Mb(),u.Mb())}function k(t,e){if(1&t&&(u.Nb(0,"ion-badge",23),u.pc(1),u.Mb()),2&t){var n=u.Xb().$implicit,i=u.Xb();u.yb(1),u.rc("Only ",i.checkQty(n)," left")}}function w(t,e){if(1&t){var n=u.Ob();u.Nb(0,"ion-item",15),u.Nb(1,"ion-img",30),u.Vb("click",(function(){u.ic(n);var t=e.$implicit;return u.Xb().goTo(t)})),u.Mb(),u.Nb(2,"ion-item-group"),u.Nb(3,"ion-item"),u.Nb(4,"ion-label"),u.Nb(5,"div"),u.Nb(6,"ion-buttons"),u.Nb(7,"ion-text"),u.pc(8),u.Yb(9,"currency"),u.Mb(),u.nc(10,k,2,1,"ion-badge",12),u.Mb(),u.Nb(11,"h6"),u.pc(12),u.Mb(),u.Nb(13,"ion-label"),u.Nb(14,"h6"),u.pc(15),u.Mb(),u.Mb(),u.Mb(),u.Mb(),u.Mb(),u.Nb(16,"ion-button",31),u.Vb("click",(function(){u.ic(n);var t=e.$implicit;return u.Xb().moveToCart(t)})),u.pc(17,"Move to Cart"),u.Mb(),u.Mb(),u.Mb()}if(2&t){var i=e.$implicit,r=u.Xb();u.yb(1),u.cc("src",i.picture),u.yb(7),u.qc(u.Zb(9,5,i.price)),u.yb(2),u.cc("ngIf",r.checkQty(i)<10&&r.checkQty(i)>1),u.yb(2),u.qc(i.name),u.yb(3),u.qc(i.description)}}var O,x,I,q=[{path:"",component:(O=function(){function e(t,i,r,o){n(this,e),this.toastconroller=t,this.router=i,this.fstoreService=r,this.storage=o,this.element="",this.browsing=[],this.cart=[],this.saved=[],this.isOnline=!1,this.orderQty=0,this.totalcost=0,this.getsavedforlater(),this.getCartItems(),this.getBrowsingHistoric()}var r,o,c;return r=e,(o=[{key:"ngOnInit",value:function(){this.nosaved=!1}},{key:"checkForCartUpdate",value:function(){var t=this,e=this.fstoreService.getFirestoreData(),n=e.filter((function(e){return!t.cart.find((function(t){return e.description===t.description}))}));console.log(n),console.log(e)}},{key:"getCartItems",value:function(){var t=this;this.totalcost=0,this.storage.get("cart").then((function(e){t.cart=e})).catch((function(t){console.log("cart not found or empty")}))}},{key:"getsavedforlater",value:function(){var t=this;this.storage.get("savedforlater").then((function(e){t.saved=e,t.nosaved=!1})).catch((function(e){console.log("saved not found or empty"),t.nosaved=!0}))}},{key:"getBrowsingHistoric",value:function(){var e=this;return this.storage.get("browsing").then((function(n){if(0!==n.length&&null!==n){var i,r=t(e.fstoreService.getFirestoreData());try{for(r.s();!(i=r.n()).done;){var o,c=i.value,a=t(n);try{for(a.s();!(o=a.n()).done;){var s=o.value;c.name==s.name&&c.description==s.description&&e.browsing.push(c)}}catch(b){a.e(b)}finally{a.f()}}}catch(b){r.e(b)}finally{r.f()}}})).catch((function(t){console.log("no browsing data found")})),this.browsing.reverse}},{key:"adjustqty",value:function(t,e){"minus"===t&&1!==e.qty&&e.qty--,"plus"===t&&e.qty++,this.storage.set("cart",this.cart)}},{key:"getTotal",value:function(){return this.cart.reduce((function(t,e){return t+e.price*e.qty}),0)}},{key:"savedForLater",value:function(e){var n,i,r=this,o=!1,c=t(this.cart);try{for(c.s();!(i=c.n()).done;){var a=i.value;a===e&&(this.cart.splice(this.cart.indexOf(e),1),n=a,o=!0)}}catch(b){c.e(b)}finally{c.f()}if(o){var s=!1;this.storage.set("cart",this.cart),this.storage.get("savedforlater").then((function(e){if(null==e||0==e.length)(e=[]).push(n);else{var i,o=t(e);try{for(o.s();!(i=o.n()).done;){var c=i.value;c==n&&(c.qty=n.qty,s=!0)}}catch(b){o.e(b)}finally{o.f()}s||e.push(n)}r.storage.set("savedforlater",e)}))}this.getsavedforlater()}},{key:"remove",value:function(e){var n,i=!1,r=t(this.cart);try{for(r.s();!(n=r.n()).done;){var o=n.value;o===e&&(this.cart.splice(this.cart.indexOf(o),1),i=!0)}}catch(c){r.e(c)}finally{r.f()}i&&this.storage.set("cart",this.cart)}},{key:"moveToCart",value:function(e){var n,i=!1,r=t(this.saved);try{for(r.s();!(n=r.n()).done;){var o=n.value;o===e&&(this.saved.splice(this.saved.indexOf(e),1),this.cart.push(o),i=!0)}}catch(c){r.e(c)}finally{r.f()}i&&(this.storage.set("savedforlater",this.saved),this.storage.set("cart",this.cart))}},{key:"crypto",value:function(){var t=Date.now();return"CA"+Math.floor(1e3*Math.random())+"-"+t}},{key:"checkout",value:function(t){var e={};if(this.totalcost>0){e.goods_departure="Packaging with KATALOG team service",e.shipping_destination="",e.status="Not shipped yet",e.carrier="",e.trackingnumber="";var n={customerId:"code",orderId:this.crypto(),items:t,date_order:new Date(Date.now()),order_qty:this.orderQty,amount:this.getTotal(),shipment:e};this.router.navigate(["/place-order"],{state:{order:n}})}}},{key:"goTo",value:function(e){this.item={};var n,i=!1,r=t(this.fstoreService.getFirestoreData());try{for(r.s();!(n=r.n()).done;){var o=n.value;o.name==e.name&&o.description==e.description&&(this.item=o,i=!0)}}catch(c){r.e(c)}finally{r.f()}i?this.router.navigate(["/product"],{state:{product:e}}):this.rejection()}},{key:"checkQty",value:function(e){var n,i=10,r=t(this.fstoreService.getFirestoreData());try{for(r.s();!(n=r.n()).done;){var o=n.value;o.name==e.name&&o.description==e.description&&(i=o.qty)}}catch(c){r.e(c)}finally{r.f()}return i}},{key:"rejection",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.toastconroller.create({message:"Sorry! product is no longer available",duration:3e3});case 2:return e=t.sent,t.next=5,e.present();case 5:case"end":return t.stop()}}),t,this)})))}},{key:"filter",value:function(){var t=this;""!==this.element&&this.cart.filter((function(e){return e.name.includes(t.element)}))}}])&&i(r.prototype,o),c&&i(r,c),e}(),O.\u0275fac=function(t){return new(t||O)(u.Ib(s.gb),u.Ib(b.g),u.Ib(f.a),u.Ib(h.b))},O.\u0275cmp=u.Cb({type:O,selectors:[["app-cart"]],decls:32,vars:8,consts:[["lines","none",1,"mt-2"],[2,"font-weight","bold"],["color","primary"],[2,"font-size","22px"],[1,"btn","btn-warning","btn-md",3,"click"],[1,"alert","alert-dark"],["name","cart","size","large"],[1,"container"],[4,"ngFor","ngForOf"],[1,"col-md-12","mt-3","border","p-4"],[4,"ngIf"],["class","alert alert-default",4,"ngIf"],["color","danger",4,"ngIf"],[1,"alert","alert-dark","mt-2"],["ion-button","","detail","true",4,"ngFor","ngForOf"],["ion-button","","detail","true"],["size","large",2,"width","110px","height","150px",3,"src","click"],[3,"click"],[1,"qty-selector"],["fill","clear",3,"click"],[1,"row"],[1,"mb-3","btn","btn-primary","btn-sm","btn-block",3,"click"],[1,"btn","btn-danger","btn-sm","btn-block",3,"click"],["color","danger"],[2,"margin-bottom","20px",3,"options"],[2,"margin","20px"],[2,"max-height","300px","max-width","300px",3,"src"],[1,"alert","alert-default"],["expand","block","fill","clear",1,"border"],["size","large","name","alert-circle"],["size","large",2,"width","115px","height","160px",3,"src","click"],["size","small",3,"click"]],template:function(t,e){1&t&&(u.Jb(0,"app-page-header"),u.Nb(1,"ion-content"),u.Nb(2,"ion-item",0),u.Nb(3,"ion-label"),u.Nb(4,"ion-buttons"),u.Nb(5,"ion-label",1),u.pc(6,"Total items cost : "),u.Mb(),u.Nb(7,"ion-text",2),u.Nb(8,"h3",3),u.pc(9),u.Yb(10,"currency"),u.Mb(),u.Mb(),u.Mb(),u.Mb(),u.Nb(11,"button",4),u.Vb("click",(function(){return e.checkout(e.cart)})),u.pc(12,"Check out"),u.Mb(),u.Mb(),u.Nb(13,"div",5),u.Nb(14,"h3"),u.Jb(15,"ion-icon",6),u.pc(16,"Cart Items"),u.Mb(),u.Mb(),u.Nb(17,"div",7),u.Nb(18,"ion-list"),u.nc(19,g,30,8,"ng-container",8),u.Mb(),u.Mb(),u.Nb(20,"div",9),u.Nb(21,"h4"),u.pc(22,"Related to your recent Browsing Items"),u.Mb(),u.nc(23,m,3,3,"ng-container",10),u.nc(24,M,3,0,"div",11),u.nc(25,N,4,0,"ion-chip",12),u.Mb(),u.Nb(26,"div",13),u.Nb(27,"h3"),u.pc(28,"Save for later"),u.Mb(),u.Mb(),u.Nb(29,"div",7),u.Nb(30,"ion-list"),u.nc(31,w,18,7,"ion-item",14),u.Mb(),u.Mb(),u.Mb()),2&t&&(u.yb(9),u.qc(u.Zb(10,6,e.getTotal())),u.yb(10),u.cc("ngForOf",e.cart),u.yb(4),u.cc("ngIf",0!==e.browsing.length&&e.isOnline),u.yb(1),u.cc("ngIf",0==e.browsing.length&&e.isOnline),u.yb(1),u.cc("ngIf",!e.isOnline),u.yb(6),u.cc("ngForOf",e.saved))},directives:[p.a,s.q,s.y,s.B,s.h,s.R,s.v,s.C,c.l,c.m,s.w,s.A,s.g,s.f,s.M,s.L,s.G,s.o],pipes:[c.d],styles:["ion-item[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;font-family:Impact,Haettenschweiler,Arial Narrow Bold,sans-serif;font-size:12px}ion-item[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-around;margin-left:10px;font-family:sans-serif}h3[_ngcontent-%COMP%]{margin-left:15px}.alert[_ngcontent-%COMP%]{padding:0}"]}),O)}],C=((x=function t(){n(this,t)}).\u0275mod=u.Gb({type:x}),x.\u0275inj=u.Fb({factory:function(t){return new(t||x)},imports:[[b.i.forChild(q)],b.i]}),x),X=o("l+lL"),F=((I=function t(){n(this,t)}).\u0275mod=u.Gb({type:I}),I.\u0275inj=u.Fb({factory:function(t){return new(t||I)},imports:[[c.c,a.f,s.W,X.a,C]]}),I)}}])}();