(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{YWbQ:function(t,i,e){"use strict";e.r(i),e.d(i,"StarcardPageModule",(function(){return D}));var o=e("ofXK"),n=e("3Pt+"),c=e("TEn/"),r=e("tyNb"),a=e("mrSG"),b=e("MCLT"),s=e("fXoL"),d=e("I/3d"),l=e("e8h1"),h=e("UbJi"),u=e("UbTl");function f(t,i){1&t&&(s.Nb(0,"div",21),s.Nb(1,"ion-buttons"),s.Nb(2,"ion-button",22),s.pc(3,"SIGN IN BEFORE USE STARCARD"),s.Mb(),s.Mb(),s.Mb())}function p(t,i){if(1&t){const t=s.Ob();s.Nb(0,"ion-chip",31),s.Vb("click",(function(){s.ic(t);const e=i.index;return s.Xb(3).changeTagColor(e)})),s.Nb(1,"ion-radio",32),s.Vb("click",(function(){s.ic(t);const e=i.$implicit;return s.Xb(3).selected(e)})),s.Mb(),s.Nb(2,"ion-label"),s.pc(3),s.Mb(),s.Mb()}if(2&t){const t=i.$implicit,e=i.index,o=s.Xb(3);s.cc("id",t.id)("color",o.tagDefaultColor[e]),s.yb(3),s.qc(t)}}function M(t,i){if(1&t){const t=s.Ob();s.Nb(0,"div",26),s.Nb(1,"ion-card"),s.Nb(2,"ion-item"),s.Nb(3,"ion-card-title",27),s.pc(4,"STAR CARD "),s.Mb(),s.Nb(5,"ion-buttons",28),s.Nb(6,"ion-radio-group"),s.nc(7,p,4,3,"ion-chip",29),s.Mb(),s.Mb(),s.Mb(),s.Nb(8,"ion-card-subtitle",27),s.pc(9,"Register to STAR CARD and benefits 10% off"),s.Mb(),s.Nb(10,"ion-button",30),s.Vb("click",(function(){s.ic(t);const i=s.Xb(2);return i.register(i.starcard)})),s.pc(11,"Register Now"),s.Mb(),s.Nb(12,"ion-card-header"),s.pc(13,"STAR CARD is an original KATALOG payment method which is secure and help you to pay easily"),s.Mb(),s.Mb(),s.Mb()}if(2&t){const t=s.Xb(2);s.yb(7),s.cc("ngForOf",t.devise)}}function m(t,i){if(1&t){const t=s.Ob();s.Nb(0,"ion-slide",32),s.Vb("click",(function(){s.ic(t);const e=i.$implicit;return s.Xb(4).refill("USD",e)})),s.Nb(1,"ion-card"),s.Nb(2,"ion-card-content"),s.Nb(3,"ion-card-title"),s.pc(4),s.Yb(5,"currency"),s.Mb(),s.Nb(6,"ion-card-subtitle"),s.pc(7),s.Yb(8,"currency"),s.Mb(),s.Mb(),s.Mb(),s.Mb()}if(2&t){const t=i.$implicit;s.yb(4),s.qc(s.Zb(5,2,t)),s.yb(3),s.rc("Add ",s.Zb(8,4,t)," to your star card")}}function N(t,i){if(1&t&&(s.Lb(0),s.nc(1,m,9,6,"ion-slide",41),s.Kb()),2&t){const t=s.Xb(3);s.yb(1),s.cc("ngForOf",t.starReedemUSD)}}function g(t,i){if(1&t&&(s.Nb(0,"ion-slide"),s.Nb(1,"ion-card"),s.Nb(2,"ion-card-content"),s.Nb(3,"ion-card-title"),s.pc(4),s.Mb(),s.Nb(5,"ion-card-subtitle"),s.pc(6),s.Mb(),s.Mb(),s.Mb(),s.Mb()),2&t){const t=i.$implicit;s.yb(4),s.rc("",t," gdes"),s.yb(2),s.rc("Add ",t," gdes to your star card")}}function y(t,i){if(1&t&&(s.Lb(0),s.nc(1,g,7,2,"ion-slide",39),s.Kb()),2&t){const t=s.Xb(3);s.yb(1),s.cc("ngForOf",t.starReedemHTG)}}function v(t,i){if(1&t&&(s.Nb(0,"ion-row"),s.Nb(1,"ion-col",38),s.Nb(2,"ion-label"),s.pc(3),s.Mb(),s.Mb(),s.Nb(4,"ion-col"),s.Nb(5,"ion-label"),s.pc(6),s.Yb(7,"date"),s.Mb(),s.Mb(),s.Mb()),2&t){const t=i.$implicit;s.yb(3),s.qc(t.amount),s.yb(3),s.qc(s.Zb(7,2,t.date))}}function C(t,i){if(1&t&&(s.Nb(0,"ion-row"),s.Nb(1,"ion-col",40),s.Nb(2,"ion-label"),s.pc(3),s.Mb(),s.Mb(),s.Nb(4,"ion-col",40),s.Nb(5,"ion-label"),s.pc(6),s.Mb(),s.Mb(),s.Nb(7,"ion-col"),s.Nb(8,"ion-label"),s.pc(9),s.Yb(10,"date"),s.Mb(),s.Mb(),s.Mb()),2&t){const t=i.$implicit;s.yb(3),s.rc(" ",t.orderId," "),s.yb(3),s.qc(t.amount),s.yb(3),s.qc(s.Zb(10,3,t.date))}}function O(t,i){if(1&t&&(s.Nb(0,"div",33),s.Nb(1,"div",34),s.Nb(2,"ion-item"),s.Nb(3,"ion-label"),s.pc(4,"Star Card balance :"),s.Mb(),s.Nb(5,"ion-badge",35),s.pc(6),s.Mb(),s.Mb(),s.Mb(),s.Nb(7,"div",34),s.Nb(8,"ion-item"),s.Nb(9,"ion-label"),s.pc(10,"Reedem your Star Card"),s.Mb(),s.Nb(11,"ion-chip",28),s.pc(12),s.Mb(),s.Mb(),s.Nb(13,"ion-item-sliding"),s.Nb(14,"ion-slides",36),s.nc(15,N,2,1,"ng-container",37),s.nc(16,y,2,1,"ng-container",37),s.Mb(),s.Mb(),s.Mb(),s.Nb(17,"div",34),s.Nb(18,"ion-list"),s.Nb(19,"ion-item"),s.Nb(20,"ion-label"),s.pc(21,"Reedem Historic"),s.Mb(),s.Mb(),s.Nb(22,"ion-row"),s.Nb(23,"ion-col",38),s.Nb(24,"b"),s.pc(25,"Amount"),s.Mb(),s.Mb(),s.Nb(26,"ion-col"),s.Nb(27,"b"),s.pc(28,"purchased date"),s.Mb(),s.Mb(),s.Mb(),s.nc(29,v,8,4,"ion-row",39),s.Nb(30,"ion-item"),s.Nb(31,"ion-label"),s.pc(32,"Total Refilling"),s.Mb(),s.Nb(33,"ion-badge",28),s.pc(34,"0.00$"),s.Mb(),s.Mb(),s.Mb(),s.Mb(),s.Nb(35,"div",34),s.Nb(36,"ion-list"),s.Nb(37,"ion-item"),s.Nb(38,"ion-label"),s.pc(39,"Transactions"),s.Mb(),s.Mb(),s.Nb(40,"ion-row"),s.Nb(41,"ion-col",40),s.Nb(42,"b"),s.pc(43,"Order Id"),s.Mb(),s.Mb(),s.Nb(44,"ion-col",40),s.Nb(45,"b"),s.pc(46,"Amount"),s.Mb(),s.Mb(),s.Nb(47,"ion-col"),s.Nb(48,"b"),s.pc(49,"Transaction date"),s.Mb(),s.Mb(),s.Mb(),s.nc(50,C,11,5,"ion-row",39),s.Nb(51,"ion-item"),s.Nb(52,"ion-label"),s.pc(53,"Total Transactions"),s.Mb(),s.Nb(54,"ion-badge",28),s.pc(55,"0.00$"),s.Mb(),s.Mb(),s.Mb(),s.Mb(),s.Mb()),2&t){const t=s.Xb(2);s.yb(6),s.qc(t.starcard.amount),s.yb(6),s.rc("Devise : ",t.starcard.devise,""),s.yb(2),s.cc("options",t.slidersOpts),s.yb(1),s.cc("ngIf","USD"==t.starcard.devise),s.yb(1),s.cc("ngIf","HTG"==t.starcard.devise),s.yb(13),s.cc("ngForOf",t.starcard.reedem),s.yb(21),s.cc("ngForOf",t.starcard.transactions)}}function w(t,i){if(1&t&&(s.Nb(0,"div",23),s.nc(1,M,14,1,"div",24),s.nc(2,O,56,7,"div",25),s.Mb()),2&t){const t=s.Xb();s.yb(1),s.cc("ngIf",!t.starcard.activation),s.yb(1),s.cc("ngIf",t.starcard.activation&&1==t.isRegistred)}}const A=[{path:"",component:(()=>{class t{constructor(t,i,e,o,n,c){this.afirestore=t,this.alertcontroller=i,this.storage=e,this.loadingcontroller=o,this.fireAuth=n,this.fsdataService=c,this.devise=["USD","HTG"],this.starReedemUSD=["20","50","100","200","250","500"],this.starReedemHTG=["250","500","750","1000","5000","10.000"],this.tagDefaultColor=Array(this.devise.length).fill("medium"),this.slidersOpts={loop:!0,slidesPerView:2},this.starcard={},this.starcard.transactions=[],this.starcard.reedem=[],this.paymentMethod=[]}ngOnInit(){this.fireAuth.authState.subscribe(t=>{t.emailVerified?(this.connected=!0,this.getCardAccount()):this.connected=!1})}getPaymethod(){this.storage.get("paymethod").then(t=>{this.paymentMethod=t,0!==this.paymentMethod.length&&null!==this.paymentMethod&&this.paymentMethod.forEach(t=>{1==t.default&&(this.defaultMethod=t)})}).catch(t=>{console.log("cart not found or empty")})}refill(t,i){return Object(a.a)(this,void 0,void 0,(function*(){if(this.getPaymethod(),"USD"==t){let t=this.paymentMethod.find(t=>"PayPal"==t.method&&1==t.default),i=this.paymentMethod.find(t=>"MasterCard"==t.method&&1==t.default);if(Object(b.isNullOrUndefined)(t)&&Object(b.isNullOrUndefined)(i)){const t=yield this.alertcontroller.create({cssClass:"my-custom-class",header:"Alert",subHeader:"Subtitle",message:"No default payment method available.",buttons:["Ok"]});yield t.present()}}}))}crypto(){let t=["*","C",")","#","&","!","?","%","@","^",":","D","?"],i=Math.floor(100*Math.random()),e=Math.floor(12*Math.random());return t[e]+t[e+1]+i+"-"+Date.now()}getCardAccount(){return Object(a.a)(this,void 0,void 0,(function*(){let t=(yield this.fireAuth.currentUser).uid;this.card=new Array,this.cardCollection=this.afirestore.collection("starcard"),this.cardCollection.doc(t).snapshotChanges().subscribe(t=>{this.isRegistred=!0,this.starcard.id=t.payload.get("id"),this.starcard.devise=t.payload.get("devise"),this.starcard.amount=t.payload.get("amount"),this.starcard.reedem=t.payload.get("reedem"),this.starcard.transactions=t.payload.get("transactions"),this.starcard.activation=t.payload.get("activation")}).unsubscribe()}))}register(t){return Object(a.a)(this,void 0,void 0,(function*(){if(this.cardCollection=this.afirestore.collection("starcard"),""!==t.devise&&null!==t.devise)this.starcard.id=this.crypto(),this.starcard.amount=0,this.starcard.reedem=[],this.starcard.transactions=[],this.starcard.activation=!0,this.cardCollection.doc((yield this.fireAuth.currentUser).uid).set(this.starcard).then(()=>Object(a.a)(this,void 0,void 0,(function*(){yield this.loadingcontroller.create({cssClass:"my-custom-class",message:"Please wait...",duration:2e3}).then(t=>{t.present(),t.onDidDismiss().then(t=>{this.isRegistred=!0,console.log(t),this.saveMethod({id:this.starcard.id,method:"StarCard",provider:"KATALOG",credential:{},default:!1}),this.getCardAccount()})})})),t=>{console.log("reason"+t),this.starcard.activation=!1});else{const t=yield this.alertcontroller.create({cssClass:"my-custom-class",header:"Alert",subHeader:"Subtitle",message:"please select a currency before.",buttons:["Ok"]});yield t.present()}}))}saveMethod(t){let i=!1;this.storage.get("paymethod").then(e=>{if(null===e||0===e.length)(e=[]).push(t);else{for(let o of e)o.id===t.id&&(o.method=t.id,o.provider=t.provider,o.credential.options=t.credential.options,o.credential.code=t.credential.code,o.credential.email=t.credential.email,o.credential.phone=t.credential.phone,i=!0);i||e.push(t)}})}selected(t){this.starcard.devise=t}changeTagColor(t){"medium"===this.tagDefaultColor[t]&&(this.tagDefaultColor[0]="medium",this.tagDefaultColor[1]="medium",this.tagDefaultColor[t]="primary")}}return t.\u0275fac=function(i){return new(i||t)(s.Ib(d.a),s.Ib(c.a),s.Ib(l.b),s.Ib(c.ab),s.Ib(h.a),s.Ib(u.a))},t.\u0275cmp=s.Cb({type:t,selectors:[["app-starcard"]],decls:45,vars:2,consts:[["mode","ios"],["color","dark"],["slot","start"],["mode","ios",1,"width"],["size","LARGE","color","warning"],["color","danger"],["size","LARGE","name","cart"],["title","app header","alt","image icon","src","assets/icon/lipstick.png",1,"icon"],["name","authentification","class","ion-padding",4,"ngIf"],["name","starcard","class","ion-padding",4,"ngIf"],[1,"footer"],["round",""],["offset-1","","col-10","","routerLink","/home","routerDirection","forward"],["name","home-outline",1,"footerIcon"],[1,"touch"],["offset-1","","col-10","","routerLink","/cart","routerDirection","forward"],["name","cart-outline",1,"footerIcon"],["offset-1","","col-10","","routerLink","/profil","routerDirection","forward"],["name","person-outline",1,"footerIcon"],["offset-1","","col-10","","routerLink","/order","routerDirection","forward"],["name","cube-outline",1,"footerIcon"],["name","authentification",1,"ion-padding"],["routerLink","/login","routerDirection","forward","expand","block"],["name","starcard",1,"ion-padding"],["name","starcard_activation",4,"ngIf"],["name","starcard_content",4,"ngIf"],["name","starcard_activation"],[1,"ion-padding"],["slot","end"],[3,"id","color","click",4,"ngFor","ngForOf"],["size","small","expand","block",1,"btn-register",3,"click"],[3,"id","color","click"],[3,"click"],["name","starcard_content"],[1,"container"],["slot","end","color","medium"],[3,"options"],[4,"ngIf"],["size","7"],[4,"ngFor","ngForOf"],["size","4"],[3,"click",4,"ngFor","ngForOf"]],template:function(t,i){1&t&&(s.Nb(0,"ion-header",0),s.Nb(1,"ion-toolbar",1),s.Nb(2,"ion-buttons",2),s.Jb(3,"ion-back-button"),s.Mb(),s.Nb(4,"ion-buttons"),s.Nb(5,"ion-title",3),s.Nb(6,"ion-text",4),s.pc(7," K"),s.Mb(),s.Nb(8,"ion-text",5),s.Jb(9,"ion-icon",6),s.Mb(),s.Nb(10,"ion-text"),s.pc(11,"ta"),s.Mb(),s.Jb(12,"img",7),s.Nb(13,"ion-text"),s.pc(14,"og"),s.Mb(),s.Mb(),s.Mb(),s.Mb(),s.Nb(15,"ion-buttons"),s.Nb(16,"ion-item-divider"),s.Nb(17,"ion-label"),s.pc(18,"Pay faster with your starcard"),s.Mb(),s.Mb(),s.Mb(),s.Mb(),s.Nb(19,"ion-content"),s.nc(20,f,4,0,"div",8),s.nc(21,w,3,2,"div",9),s.Mb(),s.Nb(22,"ion-footer"),s.Nb(23,"ion-toolbar",10),s.Nb(24,"ion-row",11),s.Nb(25,"ion-col",12),s.Jb(26,"ion-icon",13),s.Nb(27,"div",14),s.Nb(28,"h4"),s.pc(29,"Home"),s.Mb(),s.Mb(),s.Mb(),s.Nb(30,"ion-col",15),s.Jb(31,"ion-icon",16),s.Nb(32,"div",14),s.Nb(33,"h4"),s.pc(34,"Cart"),s.Mb(),s.Mb(),s.Mb(),s.Nb(35,"ion-col",17),s.Jb(36,"ion-icon",18),s.Nb(37,"div",14),s.Nb(38,"h4"),s.pc(39,"Profil"),s.Mb(),s.Mb(),s.Mb(),s.Nb(40,"ion-col",19),s.Jb(41,"ion-icon",20),s.Nb(42,"div",14),s.Nb(43,"h4"),s.pc(44,"Order..."),s.Mb(),s.Mb(),s.Mb(),s.Mb(),s.Mb(),s.Mb()),2&t&&(s.yb(20),s.cc("ngIf",0==i.connected),s.yb(1),s.cc("ngIf",1==i.connected))},directives:[c.u,c.X,c.h,c.d,c.e,c.W,c.T,c.v,c.z,c.C,c.q,o.m,c.s,c.I,c.p,c.gb,r.h,c.g,c.i,c.y,c.m,c.G,c.hb,o.l,c.l,c.k,c.o,c.F,c.fb,c.f,c.B,c.O,c.D,c.N,c.j],pipes:[o.d,o.f],styles:[".btn-register[_ngcontent-%COMP%]{font-size:12px}ion-select[_ngcontent-%COMP%]{width:120px}.my-custom-class[_ngcontent-%COMP%]{--background:#222;--spinner-color:#fff;color:#fff}"]}),t})()}];let I=(()=>{class t{}return t.\u0275mod=s.Gb({type:t}),t.\u0275inj=s.Fb({factory:function(i){return new(i||t)},imports:[[r.i.forChild(A)],r.i]}),t})(),D=(()=>{class t{}return t.\u0275mod=s.Gb({type:t}),t.\u0275inj=s.Fb({factory:function(i){return new(i||t)},imports:[[o.c,n.f,c.Y,I]]}),t})()}}]);