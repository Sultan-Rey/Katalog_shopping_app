!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{tIIa:function(n,r,o){"use strict";o.r(r),o.d(r,"OrderDetailsPageModule",(function(){return P}));var i=o("ofXK"),s=o("3Pt+"),c=o("TEn/"),a=o("tyNb"),b=o("mrSG"),d=o("MCLT"),u=o("fXoL"),l=o("I/3d"),p=o("UbJi"),h=o("e8h1");function g(e,t){if(1&e&&(u.Nb(0,"h5"),u.pc(1),u.Mb()),2&e){var n=u.Xb(2);u.yb(1),u.qc(n.data.shipment.status)}}function m(e,t){1&e&&(u.Nb(0,"ion-badge",18),u.pc(1,"Delivered"),u.Mb())}function M(e,t){if(1&e&&(u.Nb(0,"ion-select-option"),u.pc(1),u.Mb()),2&e){var n=t.$implicit;u.yb(1),u.qc(n.address1)}}function f(e,t){if(1&e){var n=u.Ob();u.Nb(0,"ion-button",19),u.Nb(1,"ion-select",20),u.Vb("ionChange",(function(){u.ic(n);var e=u.Xb(2);return e.changeAddress(e.shippingAddress,e.data.orderId)}))("ngModelChange",(function(e){return u.ic(n),u.Xb(2).shippingAddress=e})),u.nc(2,M,2,1,"ion-select-option",21),u.Mb(),u.Mb()}if(2&e){var r=u.Xb(2);u.yb(1),u.cc("ngModel",r.shippingAddress),u.yb(1),u.cc("ngForOf",r.address)}}function N(e,t){if(1&e){var n=u.Ob();u.Nb(0,"ion-button",22),u.Vb("click",(function(){u.ic(n);var e=u.Xb(2);return e.cancelOrder(e.data)})),u.pc(1,"Cancel Order"),u.Mb()}}function v(e,t){if(1&e){var n=u.Ob();u.Nb(0,"ion-button",23),u.Vb("click",(function(){u.ic(n);var e=u.Xb(2);return e.refunding(e.data)})),u.pc(1,"Ask for Refunds"),u.Jb(2,"ion-spinner",24),u.Mb()}}function y(e,t){if(1&e){var n=u.Ob();u.Nb(0,"div",25),u.Nb(1,"fieldset"),u.Nb(2,"legend"),u.Nb(3,"p"),u.pc(4,"Carrier assigment"),u.Mb(),u.Nb(5,"h6"),u.pc(6,"admin only is authorized to manage carrier"),u.Mb(),u.Mb(),u.Nb(7,"ion-button",26),u.pc(8,"Claim payment"),u.Mb(),u.Nb(9,"div"),u.Nb(10,"ion-select",27),u.Vb("ngModelChange",(function(e){return u.ic(n),u.Xb(2).carrier.name=e})),u.Nb(11,"ion-select-option"),u.pc(12,"UPS"),u.Mb(),u.Nb(13,"ion-select-option"),u.pc(14,"USPS"),u.Mb(),u.Nb(15,"ion-select-option"),u.pc(16,"BPS"),u.Mb(),u.Nb(17,"ion-select-option"),u.pc(18,"DHL Express"),u.Mb(),u.Nb(19,"ion-select-option"),u.pc(20,"Katalog Express"),u.Mb(),u.Mb(),u.Mb(),u.Nb(21,"div"),u.Nb(22,"ion-input",28),u.Vb("ngModelChange",(function(e){return u.ic(n),u.Xb(2).carrier.tracking=e})),u.Mb(),u.Mb(),u.Nb(23,"div"),u.Nb(24,"ion-button",29),u.Vb("click",(function(){u.ic(n);var e=u.Xb(2);return e.setCarrier(e.carrier,e.data.orderId)})),u.pc(25,"Set Carrier"),u.Jb(26,"ion-spinner",30),u.Mb(),u.Mb(),u.Mb(),u.Mb()}if(2&e){var r=u.Xb(2);u.yb(10),u.cc("ngModel",r.carrier.name),u.yb(12),u.cc("ngModel",r.carrier.tracking)}}function C(e,t){if(1&e&&(u.Lb(0),u.Nb(1,"div"),u.Nb(2,"fieldset"),u.Nb(3,"legend"),u.Nb(4,"label"),u.pc(5,"Order Info"),u.Mb(),u.Mb(),u.Nb(6,"ion-grid"),u.Nb(7,"ion-row"),u.Nb(8,"ion-col",12),u.pc(9,"Date Order"),u.Mb(),u.Nb(10,"ion-col"),u.pc(11),u.Yb(12,"date"),u.Mb(),u.Mb(),u.Nb(13,"ion-row"),u.Nb(14,"ion-col",12),u.pc(15,"# Order"),u.Mb(),u.Nb(16,"ion-col"),u.pc(17),u.Yb(18,"currency"),u.Mb(),u.Mb(),u.Nb(19,"ion-row"),u.Nb(20,"ion-col",12),u.pc(21,"Cost Order"),u.Mb(),u.Nb(22,"ion-col"),u.pc(23),u.Yb(24,"currency"),u.Mb(),u.Mb(),u.Mb(),u.Mb(),u.Mb(),u.Nb(25,"div"),u.Nb(26,"fieldset"),u.Nb(27,"legend"),u.Nb(28,"p"),u.pc(29,"Shipment Status"),u.Mb(),u.Mb(),u.Nb(30,"h6"),u.pc(31),u.Mb(),u.Nb(32,"h5"),u.pc(33),u.Mb(),u.Nb(34,"p"),u.pc(35),u.Jb(36,"br"),u.Mb(),u.nc(37,g,2,1,"h5",2),u.nc(38,m,2,0,"ion-badge",13),u.Mb(),u.Mb(),u.Nb(39,"div"),u.Nb(40,"fieldset"),u.Nb(41,"legend"),u.Nb(42,"p"),u.pc(43,"Manage your order"),u.Mb(),u.Mb(),u.nc(44,f,3,2,"ion-button",14),u.nc(45,N,2,0,"ion-button",15),u.nc(46,v,3,0,"ion-button",16),u.Mb(),u.Mb(),u.nc(47,y,27,2,"div",17),u.Jb(48,"div"),u.Kb()),2&e){var n=u.Xb();u.yb(11),u.qc(u.Zb(12,12,n.data.date_order)),u.yb(6),u.qc(u.Zb(18,14,n.data.orderId)),u.yb(6),u.qc(u.Zb(24,16,n.data.amount)),u.yb(8),u.rc("Ship to - ",n.data.shipment.shipping_destination,""),u.yb(2),u.qc(n.data.shipment.carrier),u.yb(2),u.qc(n.data.shipment.trackingnumber),u.yb(2),u.cc("ngIf","Delivered"!==n.data.shipment.status),u.yb(1),u.cc("ngIf","Delivered"==n.data.shipment.status),u.yb(6),u.cc("ngIf","Shipped"!==n.data.shipment.status),u.yb(1),u.cc("ngIf","CANCELLED"!==n.data.shipment.status&&"Shipped"!==n.data.shipment.status&&"Delivered"!==n.data.shipment.status),u.yb(1),u.cc("ngIf","Shipped"!==n.data.shipment.status),u.yb(1),u.cc("ngIf","ADMIN"==n.userType)}}function x(e,t){1&e&&(u.Lb(0),u.Nb(1,"div"),u.Nb(2,"fieldset"),u.Nb(3,"legend"),u.Nb(4,"p"),u.pc(5,"Order Info"),u.Mb(),u.Mb(),u.Nb(6,"ion-row"),u.Nb(7,"ion-col"),u.Nb(8,"h5"),u.pc(9,"Date Order"),u.Mb(),u.Mb(),u.Nb(10,"ion-col"),u.Nb(11,"ion-skeleton-text"),u.Jb(12,"h6"),u.Mb(),u.Mb(),u.Mb(),u.Nb(13,"ion-row"),u.Nb(14,"ion-col"),u.Nb(15,"h5"),u.pc(16,"# Order"),u.Mb(),u.Mb(),u.Nb(17,"ion-col"),u.Nb(18,"ion-skeleton-text"),u.Jb(19,"h6"),u.Mb(),u.Mb(),u.Mb(),u.Nb(20,"ion-row"),u.Nb(21,"ion-col"),u.Nb(22,"h5"),u.pc(23,"Cost Order"),u.Mb(),u.Mb(),u.Nb(24,"ion-col"),u.Nb(25,"ion-skeleton-text"),u.Jb(26,"h6"),u.Mb(),u.Mb(),u.Mb(),u.Mb(),u.Mb(),u.Nb(27,"div"),u.Nb(28,"fieldset"),u.Nb(29,"legend"),u.Nb(30,"p"),u.pc(31,"Shipment Status"),u.Mb(),u.Mb(),u.Nb(32,"ion-skeleton-text"),u.Jb(33,"h5"),u.Mb(),u.Nb(34,"ion-skeleton-text"),u.Jb(35,"p"),u.Mb(),u.Nb(36,"ion-skeleton-text"),u.Jb(37,"h5"),u.Mb(),u.Mb(),u.Mb(),u.Nb(38,"div"),u.Nb(39,"fieldset"),u.Nb(40,"legend"),u.Nb(41,"p"),u.pc(42,"Manage your order"),u.Mb(),u.Mb(),u.Nb(43,"ion-skeleton-text"),u.Nb(44,"ion-button",19),u.Nb(45,"ion-select",31),u.Nb(46,"ion-select-option"),u.pc(47,"Option2"),u.Mb(),u.Mb(),u.Mb(),u.Mb(),u.Nb(48,"ion-skeleton-text"),u.Nb(49,"ion-button",32),u.pc(50,"Cancel order"),u.Mb(),u.Nb(51,"ion-button",33),u.pc(52,"Ask for Refunds"),u.Mb(),u.Nb(53,"ion-button",26),u.pc(54,"Claim payment"),u.Mb(),u.Mb(),u.Nb(55,"ion-skeleton-text"),u.Nb(56,"div"),u.Nb(57,"ion-select",34),u.Nb(58,"ion-select-option"),u.pc(59,"UPS"),u.Mb(),u.Nb(60,"ion-select-option"),u.pc(61,"USPS"),u.Mb(),u.Nb(62,"ion-select-option"),u.pc(63,"BPS"),u.Mb(),u.Nb(64,"ion-select-option"),u.pc(65,"DHL Express"),u.Mb(),u.Nb(66,"ion-select-option"),u.pc(67,"Katalog Express"),u.Mb(),u.Mb(),u.Mb(),u.Mb(),u.Nb(68,"ion-skeleton-text"),u.Nb(69,"div"),u.Jb(70,"ion-button",35),u.Mb(),u.Mb(),u.Mb(),u.Mb(),u.Nb(71,"div"),u.Nb(72,"fieldset"),u.Nb(73,"legend"),u.Nb(74,"p"),u.pc(75,"Payment Method"),u.Mb(),u.Mb(),u.Nb(76,"ion-row"),u.Nb(77,"ion-skeleton-text"),u.Nb(78,"ion-col"),u.Jb(79,"h6"),u.Mb(),u.Mb(),u.Nb(80,"ion-skeleton-text"),u.Nb(81,"ion-col"),u.Jb(82,"h6"),u.Mb(),u.Mb(),u.Mb(),u.Nb(83,"ion-row"),u.Nb(84,"ion-skeleton-text"),u.Nb(85,"h4"),u.pc(86,"Billing address"),u.Mb(),u.Nb(87,"p"),u.pc(88,"Lorem ipsum dolor sit amet consectetur adipisicing elit. Voluptates vitae sit consectetur! Hic, tempore nihil! Quaerat tenetur vitae magnam quae? Odio a ullam ipsum voluptatibus rem mollitia, quia totam labore?"),u.Mb(),u.Mb(),u.Mb(),u.Mb(),u.Mb(),u.Kb())}var O,k,w,I=[{path:"",component:(O=function(){function n(t,r,o,i,s,c){e(this,n),this.route=t,this.router=r,this.afirestore=o,this.fireAuth=i,this.alertcontroller=s,this.storage=c,this.shippingAddress="",this.userType="",this.carrier={name:"",tracking:""},this.nodata=!0,this.msg={},this.getAdresses()}var r,o,i;return r=n,(o=[{key:"ngOnInit",value:function(){var e=this;this.route.queryParams.subscribe((function(t){e.router.getCurrentNavigation().extras.state&&(e.data=e.router.getCurrentNavigation().extras.state.order,e.userType=e.router.getCurrentNavigation().extras.state.type)})),this.nodata=!!Object(d.isNullOrUndefined)(this.data)}},{key:"getAdresses",value:function(){var e=this;this.storage.get("address").then((function(t){e.address=t})).catch((function(e){console.log("addresses not found or empty")}))}},{key:"changeAddress",value:function(e,t){return Object(b.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.fireAuth.currentUser;case 2:this.msg.author=t.sent.uid,this.msg.object="ORDER_UPDATE",this.msg.content=e,this.msg.destination="ADMIN",this.msg.date_msg=new Date(Date.now()),this.afirestore.collection("messages").add(this.msg),this.afirestore.collection("message").doc("ADMIN_ONE").collection("update").add(this.msg).then((function(){return Object(b.a)(n,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.alertcontroller.create({cssClass:"my-custom-class",header:"Alert",subHeader:"Subtitle",message:"Shipping address will change to."+e+" please verify your message box for confirmation",buttons:["Ok"]});case 2:return n=t.sent,t.next=5,n.present();case 5:case"end":return t.stop()}}),t,this)})))}));case 9:case"end":return t.stop()}}),t,this)})))}},{key:"cancelOrder",value:function(e){return Object(b.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r,o=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.fireAuth.currentUser;case 2:return n=t.sent.uid,t.next=5,this.alertcontroller.create({cssClass:"my-custom-class",header:"Alert",subHeader:"Cancel Order",message:"Do you really want to cancel order."+e.orderId,buttons:[{text:"OK",cssClass:"",handler:function(t){o.afirestore.collection("orders").doc(n).collection("customer_order").doc(e.orderId).update({"shipment.status":"CANCELLED"}).then((function(){o.data.shipment.status="User is cancelling the order"})).catch((function(e){o.msgFaillure(e)}))}},{text:"Cancel",cssClass:"my-custom-class"}]});case 5:return r=t.sent,t.next=8,r.present();case 8:case"end":return t.stop()}}),t,this)})))}},{key:"refunding",value:function(e){return Object(b.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r,o=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return document.getElementById("spin2").setAttribute("hidden","false"),t.next=3,this.fireAuth.currentUser;case 3:return n=t.sent.uid,t.next=6,this.alertcontroller.create({cssClass:"my-custom-class",header:"Alert",subHeader:"Assign carrier",message:"By starting a refund process you have to return back the purchased item. please contact customer services for support. ",buttons:[{text:"OK",cssClass:"",handler:function(t){o.afirestore.collection("orders").doc(n).collection("customer_order").doc(e.orderId).update({"shipment.status":"REFUNDS"}).then((function(){document.getElementById("spin2").setAttribute("hidden","true"),o.data.shipment.status="Refunds process started"})).catch((function(e){o.msgFaillure(e),document.getElementById("spin2").setAttribute("hidden","true")}))}},{text:"Cancel",cssClass:"my-custom-class"}]});case 6:return r=t.sent,t.next=9,r.present();case 9:case"end":return t.stop()}}),t,this)})))}},{key:"setCarrier",value:function(e,t){return Object(b.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r,o,i=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(""===e.name||""===e.tracking||null===e.name||null===e.tracking){n.next=12;break}return document.getElementById("spin").setAttribute("hidden","false"),n.next=4,this.fireAuth.currentUser;case 4:return r=n.sent.uid,n.next=7,this.alertcontroller.create({cssClass:"my-custom-class",header:"Alert",subHeader:"Assign carrier",message:"Once you validate item will be shipped by carrier "+e.name,buttons:[{text:"OK",cssClass:"",handler:function(n){i.afirestore.collection("orders").doc(r).collection("customer_order").doc(t).update({"shipment.status":"Shipped","shipment.carrier":e.name,"shipment.tracking":e.tracking}).then((function(){document.getElementById("spin").setAttribute("hidden","true"),i.data.shipment.status="Shipped"})).catch((function(e){i.msgFaillure(e),document.getElementById("spin").setAttribute("hidden","true")}))}},{text:"Cancel",cssClass:"my-custom-class"}]});case 7:return o=n.sent,n.next=10,o.present();case 10:n.next=13;break;case 12:this.msgFaillure("No tracking number or carrier set");case 13:case"end":return n.stop()}}),n,this)})))}},{key:"msgFaillure",value:function(e){return Object(b.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.alertcontroller.create({cssClass:"my-custom-class",header:"Alert",subHeader:"Assign carrier",message:"Operation failed"+e,buttons:["OK"]});case 2:return n=t.sent,t.next=5,n.present();case 5:case"end":return t.stop()}}),t,this)})))}}])&&t(r.prototype,o),i&&t(r,i),n}(),O.\u0275fac=function(e){return new(e||O)(u.Ib(a.a),u.Ib(a.g),u.Ib(l.a),u.Ib(p.a),u.Ib(c.a),u.Ib(h.b))},O.\u0275cmp=u.Cb({type:O,selectors:[["app-order-details"]],decls:29,vars:2,consts:[["mode","ios"],["slot","start",2,"margin-top","5%"],[4,"ngIf"],["color","dark"],["routerLink","/home","routerDirection","forward"],["name","home-outline"],["routerLink","/cart","routerDirection","forward"],["name","cart-outline"],["routerLink","/account","routerDirection","forward"],["name","person-circle-outline"],["routerLink","/order","routerDirection","forward"],["name","cube-outline"],["size","8"],["color","success",4,"ngIf"],["color","medium",4,"ngIf"],["color","danger",3,"click",4,"ngIf"],["color","warning",3,"click",4,"ngIf"],["name","admin_purposes",4,"ngIf"],["color","success"],["color","medium"],["placeholder","Change shipping address",3,"ngModel","ionChange","ngModelChange"],[4,"ngFor","ngForOf"],["color","danger",3,"click"],["color","warning",3,"click"],["id","spin2","hidden","true"],["name","admin_purposes"],["color","tertiary"],["placeholder","Assign a carrier",3,"ngModel","ngModelChange"],["type","text","placeholder","Carrier tracking number",3,"ngModel","ngModelChange"],["color","secondary",3,"click"],["id","spin","hidden","true"],["placeholder","Change shipping address"],["color","danger"],["color","warning"],["placeholder","Assign a carrier"],["color","secondary"]],template:function(e,t){1&e&&(u.Nb(0,"ion-header",0),u.Nb(1,"ion-toolbar"),u.Nb(2,"ion-buttons",1),u.Jb(3,"ion-back-button"),u.Mb(),u.Nb(4,"ion-title"),u.pc(5,"Order Details"),u.Mb(),u.Mb(),u.Mb(),u.Nb(6,"ion-content"),u.nc(7,C,49,18,"ng-container",2),u.nc(8,x,89,0,"ng-container",2),u.Mb(),u.Nb(9,"ion-footer"),u.Nb(10,"ion-toolbar"),u.Nb(11,"ion-tabs"),u.Nb(12,"ion-tab-bar",3),u.Nb(13,"ion-tab-button",4),u.Jb(14,"ion-icon",5),u.Nb(15,"ion-label"),u.pc(16,"Home"),u.Mb(),u.Mb(),u.Nb(17,"ion-tab-button",6),u.Jb(18,"ion-icon",7),u.Nb(19,"ion-label"),u.pc(20,"Cart"),u.Mb(),u.Mb(),u.Nb(21,"ion-tab-button",8),u.Jb(22,"ion-icon",9),u.Nb(23,"ion-label"),u.pc(24,"Profil"),u.Mb(),u.Mb(),u.Nb(25,"ion-tab-button",10),u.Jb(26,"ion-icon",11),u.Nb(27,"ion-label"),u.pc(28,"Order"),u.Mb(),u.Mb(),u.Mb(),u.Mb(),u.Mb(),u.Mb()),2&e&&(u.yb(7),u.cc("ngIf",!t.nodata),u.yb(1),u.cc("ngIf",t.nodata))},directives:[c.u,c.V,c.h,c.d,c.e,c.U,c.q,i.m,c.s,c.Q,c.O,c.P,c.db,a.h,c.v,c.B,c.t,c.G,c.p,c.f,c.g,c.I,c.eb,s.i,s.l,i.l,c.J,c.N,c.x,c.fb,c.K],pipes:[i.f,i.d],styles:["ion-content[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:13px}ion-content[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin-top:1px;margin-bottom:1px;padding-top:0;padding-bottom:0}ion-content[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:12px}ion-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{padding-top:2px;margin-top:2px;margin-bottom:2px;font-size:14px}ion-content[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{text-align:justify;border-top:3px solid #eee;border-bottom:3px solid #eee}ion-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:700}ion-content[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%]{border-radius:10%}ion-content[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:80%;height:40px;margin-top:auto;margin-left:10%;margin-right:10%;padding:auto;font-family:Courier New,Courier,monospace;font-weight:700}"]}),O)}],A=((w=function t(){e(this,t)}).\u0275mod=u.Gb({type:w}),w.\u0275inj=u.Fb({factory:function(e){return new(e||w)},imports:[[a.i.forChild(I)],a.i]}),w),P=((k=function t(){e(this,t)}).\u0275mod=u.Gb({type:k}),k.\u0275inj=u.Fb({factory:function(e){return new(e||k)},imports:[[i.c,s.f,c.W,A]]}),k)}}])}();