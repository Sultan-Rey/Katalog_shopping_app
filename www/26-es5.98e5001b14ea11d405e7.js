!function(){function t(t,n){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function(t,n){if(!t)return;if("string"==typeof t)return e(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return e(t,n)}(t))||n&&t&&"number"==typeof t.length){i&&(t=i);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,b=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return c=t.done,t},e:function(t){b=!0,a=t},f:function(){try{c||null==i.return||i.return()}finally{if(b)throw a}}}}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{YWbQ:function(e,r,o){"use strict";o.r(r),o.d(r,"StarcardPageModule",(function(){return F}));var a=o("ofXK"),c=o("3Pt+"),b=o("TEn/"),s=o("tyNb"),d=o("mrSG"),l=o("MCLT"),u=o("fXoL"),f=o("I/3d"),h=o("e8h1"),p=o("UbJi"),m=o("UbTl");function M(t,e){1&t&&(u.Nb(0,"div",21),u.Nb(1,"ion-buttons"),u.Nb(2,"ion-button",22),u.pc(3,"SIGN IN BEFORE USE STARCARD"),u.Mb(),u.Mb(),u.Mb())}function g(t,e){if(1&t){var n=u.Ob();u.Nb(0,"ion-chip",31),u.Vb("click",(function(){u.ic(n);var t=e.index;return u.Xb(3).changeTagColor(t)})),u.Nb(1,"ion-radio",32),u.Vb("click",(function(){u.ic(n);var t=e.$implicit;return u.Xb(3).selected(t)})),u.Mb(),u.Nb(2,"ion-label"),u.pc(3),u.Mb(),u.Mb()}if(2&t){var i=e.$implicit,r=e.index,o=u.Xb(3);u.cc("id",i.id)("color",o.tagDefaultColor[r]),u.yb(3),u.qc(i)}}function v(t,e){if(1&t){var n=u.Ob();u.Nb(0,"div",26),u.Nb(1,"ion-card"),u.Nb(2,"ion-item"),u.Nb(3,"ion-card-title",27),u.pc(4,"STAR CARD "),u.Mb(),u.Nb(5,"ion-buttons",28),u.Nb(6,"ion-radio-group"),u.nc(7,g,4,3,"ion-chip",29),u.Mb(),u.Mb(),u.Mb(),u.Nb(8,"ion-card-subtitle",27),u.pc(9,"Register to STAR CARD and benefits 10% off"),u.Mb(),u.Nb(10,"ion-button",30),u.Vb("click",(function(){u.ic(n);var t=u.Xb(2);return t.register(t.starcard)})),u.pc(11,"Register Now"),u.Mb(),u.Nb(12,"ion-card-header"),u.pc(13,"STAR CARD is an original KATALOG payment method which is secure and help you to pay easily"),u.Mb(),u.Mb(),u.Mb()}if(2&t){var i=u.Xb(2);u.yb(7),u.cc("ngForOf",i.devise)}}function N(t,e){if(1&t){var n=u.Ob();u.Nb(0,"ion-slide",32),u.Vb("click",(function(){u.ic(n);var t=e.$implicit;return u.Xb(4).refill("USD",t)})),u.Nb(1,"ion-card"),u.Nb(2,"ion-card-content"),u.Nb(3,"ion-card-title"),u.pc(4),u.Yb(5,"currency"),u.Mb(),u.Nb(6,"ion-card-subtitle"),u.pc(7),u.Yb(8,"currency"),u.Mb(),u.Mb(),u.Mb(),u.Mb()}if(2&t){var i=e.$implicit;u.yb(4),u.qc(u.Zb(5,2,i)),u.yb(3),u.rc("Add ",u.Zb(8,4,i)," to your star card")}}function y(t,e){if(1&t&&(u.Lb(0),u.nc(1,N,9,6,"ion-slide",41),u.Kb()),2&t){var n=u.Xb(3);u.yb(1),u.cc("ngForOf",n.starReedemUSD)}}function w(t,e){if(1&t&&(u.Nb(0,"ion-slide"),u.Nb(1,"ion-card"),u.Nb(2,"ion-card-content"),u.Nb(3,"ion-card-title"),u.pc(4),u.Mb(),u.Nb(5,"ion-card-subtitle"),u.pc(6),u.Mb(),u.Mb(),u.Mb(),u.Mb()),2&t){var n=e.$implicit;u.yb(4),u.rc("",n," gdes"),u.yb(2),u.rc("Add ",n," gdes to your star card")}}function k(t,e){if(1&t&&(u.Lb(0),u.nc(1,w,7,2,"ion-slide",39),u.Kb()),2&t){var n=u.Xb(3);u.yb(1),u.cc("ngForOf",n.starReedemHTG)}}function C(t,e){if(1&t&&(u.Nb(0,"ion-row"),u.Nb(1,"ion-col",38),u.Nb(2,"ion-label"),u.pc(3),u.Mb(),u.Mb(),u.Nb(4,"ion-col"),u.Nb(5,"ion-label"),u.pc(6),u.Yb(7,"date"),u.Mb(),u.Mb(),u.Mb()),2&t){var n=e.$implicit;u.yb(3),u.qc(n.amount),u.yb(3),u.qc(u.Zb(7,2,n.date))}}function O(t,e){if(1&t&&(u.Nb(0,"ion-row"),u.Nb(1,"ion-col",40),u.Nb(2,"ion-label"),u.pc(3),u.Mb(),u.Mb(),u.Nb(4,"ion-col",40),u.Nb(5,"ion-label"),u.pc(6),u.Mb(),u.Mb(),u.Nb(7,"ion-col"),u.Nb(8,"ion-label"),u.pc(9),u.Yb(10,"date"),u.Mb(),u.Mb(),u.Mb()),2&t){var n=e.$implicit;u.yb(3),u.rc(" ",n.orderId," "),u.yb(3),u.qc(n.amount),u.yb(3),u.qc(u.Zb(10,3,n.date))}}function A(t,e){if(1&t&&(u.Nb(0,"div",33),u.Nb(1,"div",34),u.Nb(2,"ion-item"),u.Nb(3,"ion-label"),u.pc(4,"Star Card balance :"),u.Mb(),u.Nb(5,"ion-badge",35),u.pc(6),u.Mb(),u.Mb(),u.Mb(),u.Nb(7,"div",34),u.Nb(8,"ion-item"),u.Nb(9,"ion-label"),u.pc(10,"Reedem your Star Card"),u.Mb(),u.Nb(11,"ion-chip",28),u.pc(12),u.Mb(),u.Mb(),u.Nb(13,"ion-item-sliding"),u.Nb(14,"ion-slides",36),u.nc(15,y,2,1,"ng-container",37),u.nc(16,k,2,1,"ng-container",37),u.Mb(),u.Mb(),u.Mb(),u.Nb(17,"div",34),u.Nb(18,"ion-list"),u.Nb(19,"ion-item"),u.Nb(20,"ion-label"),u.pc(21,"Reedem Historic"),u.Mb(),u.Mb(),u.Nb(22,"ion-row"),u.Nb(23,"ion-col",38),u.Nb(24,"b"),u.pc(25,"Amount"),u.Mb(),u.Mb(),u.Nb(26,"ion-col"),u.Nb(27,"b"),u.pc(28,"purchased date"),u.Mb(),u.Mb(),u.Mb(),u.nc(29,C,8,4,"ion-row",39),u.Nb(30,"ion-item"),u.Nb(31,"ion-label"),u.pc(32,"Total Refilling"),u.Mb(),u.Nb(33,"ion-badge",28),u.pc(34,"0.00$"),u.Mb(),u.Mb(),u.Mb(),u.Mb(),u.Nb(35,"div",34),u.Nb(36,"ion-list"),u.Nb(37,"ion-item"),u.Nb(38,"ion-label"),u.pc(39,"Transactions"),u.Mb(),u.Mb(),u.Nb(40,"ion-row"),u.Nb(41,"ion-col",40),u.Nb(42,"b"),u.pc(43,"Order Id"),u.Mb(),u.Mb(),u.Nb(44,"ion-col",40),u.Nb(45,"b"),u.pc(46,"Amount"),u.Mb(),u.Mb(),u.Nb(47,"ion-col"),u.Nb(48,"b"),u.pc(49,"Transaction date"),u.Mb(),u.Mb(),u.Mb(),u.nc(50,O,11,5,"ion-row",39),u.Nb(51,"ion-item"),u.Nb(52,"ion-label"),u.pc(53,"Total Transactions"),u.Mb(),u.Nb(54,"ion-badge",28),u.pc(55,"0.00$"),u.Mb(),u.Mb(),u.Mb(),u.Mb(),u.Mb()),2&t){var n=u.Xb(2);u.yb(6),u.qc(n.starcard.amount),u.yb(6),u.rc("Devise : ",n.starcard.devise,""),u.yb(2),u.cc("options",n.slidersOpts),u.yb(1),u.cc("ngIf","USD"==n.starcard.devise),u.yb(1),u.cc("ngIf","HTG"==n.starcard.devise),u.yb(13),u.cc("ngForOf",n.starcard.reedem),u.yb(21),u.cc("ngForOf",n.starcard.transactions)}}function I(t,e){if(1&t&&(u.Nb(0,"div",23),u.nc(1,v,14,1,"div",24),u.nc(2,A,56,7,"div",25),u.Mb()),2&t){var n=u.Xb();u.yb(1),u.cc("ngIf",!n.starcard.activation),u.yb(1),u.cc("ngIf",n.starcard.activation&&1==n.isRegistred)}}var R,D,S,x=[{path:"",component:(R=function(){function e(t,i,r,o,a,c){n(this,e),this.afirestore=t,this.alertcontroller=i,this.storage=r,this.loadingcontroller=o,this.fireAuth=a,this.fsdataService=c,this.devise=["USD","HTG"],this.starReedemUSD=["20","50","100","200","250","500"],this.starReedemHTG=["250","500","750","1000","5000","10.000"],this.tagDefaultColor=Array(this.devise.length).fill("medium"),this.slidersOpts={loop:!0,slidesPerView:2},this.starcard={},this.starcard.transactions=[],this.starcard.reedem=[],this.paymentMethod=[]}var r,o,a;return r=e,(o=[{key:"ngOnInit",value:function(){var t=this;this.fireAuth.authState.subscribe((function(e){e.emailVerified?(t.connected=!0,t.getCardAccount()):t.connected=!1}))}},{key:"getPaymethod",value:function(){var t=this;this.storage.get("paymethod").then((function(e){t.paymentMethod=e,0!==t.paymentMethod.length&&null!==t.paymentMethod&&t.paymentMethod.forEach((function(e){1==e.default&&(t.defaultMethod=e)}))})).catch((function(t){console.log("cart not found or empty")}))}},{key:"refill",value:function(t,e){return Object(d.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,i,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.getPaymethod(),"USD"!=t){e.next=8;break}if(n=this.paymentMethod.find((function(t){return"PayPal"==t.method&&1==t.default})),i=this.paymentMethod.find((function(t){return"MasterCard"==t.method&&1==t.default})),!Object(l.isNullOrUndefined)(n)||!Object(l.isNullOrUndefined)(i)){e.next=8;break}return e.next=5,this.alertcontroller.create({cssClass:"my-custom-class",header:"Alert",subHeader:"Subtitle",message:"No default payment method available.",buttons:["Ok"]});case 5:return r=e.sent,e.next=8,r.present();case 8:case"end":return e.stop()}}),e,this)})))}},{key:"crypto",value:function(){var t=["*","C",")","#","&","!","?","%","@","^",":","D","?"],e=Math.floor(100*Math.random()),n=Math.floor(12*Math.random());return t[n]+t[n+1]+e+"-"+Date.now()}},{key:"getCardAccount",value:function(){return Object(d.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.fireAuth.currentUser;case 2:e=t.sent.uid,this.card=new Array,this.cardCollection=this.afirestore.collection("starcard"),this.cardCollection.doc(e).snapshotChanges().subscribe((function(t){n.isRegistred=!0,n.starcard.id=t.payload.get("id"),n.starcard.devise=t.payload.get("devise"),n.starcard.amount=t.payload.get("amount"),n.starcard.reedem=t.payload.get("reedem"),n.starcard.transactions=t.payload.get("transactions"),n.starcard.activation=t.payload.get("activation")})).unsubscribe();case 4:case"end":return t.stop()}}),t,this)})))}},{key:"register",value:function(t){return Object(d.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.cardCollection=this.afirestore.collection("starcard"),""===t.devise||null===t.devise){e.next=13;break}return this.starcard.id=this.crypto(),this.starcard.amount=0,this.starcard.reedem=[],this.starcard.transactions=[],this.starcard.activation=!0,e.t0=this.cardCollection,e.next=9,this.fireAuth.currentUser;case 9:e.t1=e.sent.uid,e.t0.doc.call(e.t0,e.t1).set(this.starcard).then((function(){return Object(d.a)(i,void 0,void 0,regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loadingcontroller.create({cssClass:"my-custom-class",message:"Please wait...",duration:2e3}).then((function(t){t.present(),t.onDidDismiss().then((function(t){e.isRegistred=!0,console.log(t),e.saveMethod({id:e.starcard.id,method:"StarCard",provider:"KATALOG",credential:{},default:!1}),e.getCardAccount()}))}));case 2:case"end":return t.stop()}}),t,this)})))}),(function(t){console.log("reason"+t),i.starcard.activation=!1})),e.next=18;break;case 13:return e.next=15,this.alertcontroller.create({cssClass:"my-custom-class",header:"Alert",subHeader:"Subtitle",message:"please select a currency before.",buttons:["Ok"]});case 15:return n=e.sent,e.next=18,n.present();case 18:case"end":return e.stop()}}),e,this)})))}},{key:"saveMethod",value:function(e){var n=!1;this.storage.get("paymethod").then((function(i){if(null===i||0===i.length)(i=[]).push(e);else{var r,o=t(i);try{for(o.s();!(r=o.n()).done;){var a=r.value;a.id===e.id&&(a.method=e.id,a.provider=e.provider,a.credential.options=e.credential.options,a.credential.code=e.credential.code,a.credential.email=e.credential.email,a.credential.phone=e.credential.phone,n=!0)}}catch(c){o.e(c)}finally{o.f()}n||i.push(e)}}))}},{key:"selected",value:function(t){this.starcard.devise=t}},{key:"changeTagColor",value:function(t){"medium"===this.tagDefaultColor[t]&&(this.tagDefaultColor[0]="medium",this.tagDefaultColor[1]="medium",this.tagDefaultColor[t]="primary")}}])&&i(r.prototype,o),a&&i(r,a),e}(),R.\u0275fac=function(t){return new(t||R)(u.Ib(f.a),u.Ib(b.a),u.Ib(h.b),u.Ib(b.ab),u.Ib(p.a),u.Ib(m.a))},R.\u0275cmp=u.Cb({type:R,selectors:[["app-starcard"]],decls:45,vars:2,consts:[["mode","ios"],["color","dark"],["slot","start"],["mode","ios",1,"width"],["size","LARGE","color","warning"],["color","danger"],["size","LARGE","name","cart"],["title","app header","alt","image icon","src","assets/icon/lipstick.png",1,"icon"],["name","authentification","class","ion-padding",4,"ngIf"],["name","starcard","class","ion-padding",4,"ngIf"],[1,"footer"],["round",""],["offset-1","","col-10","","routerLink","/home","routerDirection","forward"],["name","home-outline",1,"footerIcon"],[1,"touch"],["offset-1","","col-10","","routerLink","/cart","routerDirection","forward"],["name","cart-outline",1,"footerIcon"],["offset-1","","col-10","","routerLink","/profil","routerDirection","forward"],["name","person-outline",1,"footerIcon"],["offset-1","","col-10","","routerLink","/order","routerDirection","forward"],["name","cube-outline",1,"footerIcon"],["name","authentification",1,"ion-padding"],["routerLink","/login","routerDirection","forward","expand","block"],["name","starcard",1,"ion-padding"],["name","starcard_activation",4,"ngIf"],["name","starcard_content",4,"ngIf"],["name","starcard_activation"],[1,"ion-padding"],["slot","end"],[3,"id","color","click",4,"ngFor","ngForOf"],["size","small","expand","block",1,"btn-register",3,"click"],[3,"id","color","click"],[3,"click"],["name","starcard_content"],[1,"container"],["slot","end","color","medium"],[3,"options"],[4,"ngIf"],["size","7"],[4,"ngFor","ngForOf"],["size","4"],[3,"click",4,"ngFor","ngForOf"]],template:function(t,e){1&t&&(u.Nb(0,"ion-header",0),u.Nb(1,"ion-toolbar",1),u.Nb(2,"ion-buttons",2),u.Jb(3,"ion-back-button"),u.Mb(),u.Nb(4,"ion-buttons"),u.Nb(5,"ion-title",3),u.Nb(6,"ion-text",4),u.pc(7," K"),u.Mb(),u.Nb(8,"ion-text",5),u.Jb(9,"ion-icon",6),u.Mb(),u.Nb(10,"ion-text"),u.pc(11,"ta"),u.Mb(),u.Jb(12,"img",7),u.Nb(13,"ion-text"),u.pc(14,"og"),u.Mb(),u.Mb(),u.Mb(),u.Mb(),u.Nb(15,"ion-buttons"),u.Nb(16,"ion-item-divider"),u.Nb(17,"ion-label"),u.pc(18,"Pay faster with your starcard"),u.Mb(),u.Mb(),u.Mb(),u.Mb(),u.Nb(19,"ion-content"),u.nc(20,M,4,0,"div",8),u.nc(21,I,3,2,"div",9),u.Mb(),u.Nb(22,"ion-footer"),u.Nb(23,"ion-toolbar",10),u.Nb(24,"ion-row",11),u.Nb(25,"ion-col",12),u.Jb(26,"ion-icon",13),u.Nb(27,"div",14),u.Nb(28,"h4"),u.pc(29,"Home"),u.Mb(),u.Mb(),u.Mb(),u.Nb(30,"ion-col",15),u.Jb(31,"ion-icon",16),u.Nb(32,"div",14),u.Nb(33,"h4"),u.pc(34,"Cart"),u.Mb(),u.Mb(),u.Mb(),u.Nb(35,"ion-col",17),u.Jb(36,"ion-icon",18),u.Nb(37,"div",14),u.Nb(38,"h4"),u.pc(39,"Profil"),u.Mb(),u.Mb(),u.Mb(),u.Nb(40,"ion-col",19),u.Jb(41,"ion-icon",20),u.Nb(42,"div",14),u.Nb(43,"h4"),u.pc(44,"Order..."),u.Mb(),u.Mb(),u.Mb(),u.Mb(),u.Mb(),u.Mb()),2&t&&(u.yb(20),u.cc("ngIf",0==e.connected),u.yb(1),u.cc("ngIf",1==e.connected))},directives:[b.u,b.X,b.h,b.d,b.e,b.W,b.T,b.v,b.z,b.C,b.q,a.m,b.s,b.I,b.p,b.gb,s.h,b.g,b.i,b.y,b.m,b.G,b.hb,a.l,b.l,b.k,b.o,b.F,b.fb,b.f,b.B,b.O,b.D,b.N,b.j],pipes:[a.d,a.f],styles:[".btn-register[_ngcontent-%COMP%]{font-size:12px}ion-select[_ngcontent-%COMP%]{width:120px}.my-custom-class[_ngcontent-%COMP%]{--background:#222;--spinner-color:#fff;color:#fff}"]}),R)}],T=((S=function t(){n(this,t)}).\u0275mod=u.Gb({type:S}),S.\u0275inj=u.Fb({factory:function(t){return new(t||S)},imports:[[s.i.forChild(x)],s.i]}),S),F=((D=function t(){n(this,t)}).\u0275mod=u.Gb({type:D}),D.\u0275inj=u.Fb({factory:function(t){return new(t||D)},imports:[[a.c,c.f,b.Y,T]]}),D)}}])}();