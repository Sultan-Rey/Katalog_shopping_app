!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{"Kw+X":function(n,r,i){"use strict";i.r(r),i.d(r,"VerificationPageModule",(function(){return y}));var o,a,s,c=i("ofXK"),u=i("3Pt+"),l=i("TEn/"),d=i("tyNb"),f=i("mrSG"),p=i("MCLT"),h=i("fXoL"),b=i("I/3d"),m=i("e8h1"),g=i("UbJi"),v=[{path:"",component:(o=function(){function n(t,r,i,o,a,s,c,l){e(this,n),this.route=t,this.router=r,this.formBuilder=i,this.afs=o,this.loadingController=a,this.storage=s,this.afAuth=c,this.alertcontroller=l,this.credential={mail:"",password:"",phone:""},this.state=!0,this.verificationForm=this.formBuilder.group({verifiedcode:["",[u.o.required,u.o.pattern("^[0-9]{6}(?:-[0-9]{4})?$")]]})}var r,i,o;return r=n,(i=[{key:"ngOnInit",value:function(){var e=this;this.route.queryParams.subscribe((function(t){e.router.getCurrentNavigation().extras.state&&(e.data=e.router.getCurrentNavigation().extras.state.order,e.user=e.router.getCurrentNavigation().extras.state.info,e.signin(e.user))}))}},{key:"sms_preference",value:function(){return Object(f.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===this.user.address.phone||null===this.user.address.phone){e.next=10;break}return e.next=3,this.alertcontroller.create({cssClass:"my-custom-class",header:"Alert",subHeader:"Verification",message:"Code has been sent to "+this.user.address.phone,buttons:["Ok"]});case 3:return t=e.sent,e.next=6,t.present();case 6:document.getElementById("sms_code").style.display="block",document.getElementById("mail_link").style.display="none;",e.next=15;break;case 10:return e.next=12,this.alertcontroller.create({cssClass:"my-custom-class",header:"Alert",subHeader:"Verification",message:"No phone number found, please verify by email. ",buttons:["Ok"]});case 12:return n=e.sent,e.next=15,n.present();case 15:case"end":return e.stop()}}),e,this)})))}},{key:"signin",value:function(e){return Object(f.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.afAuth.createUserWithEmailAndPassword(e.email.trim(),e.password.trim());case 3:return n=t.sent,t.next=6,this.afs.doc("user/"+n.user.uid).set(e).then((function(){return Object(f.a)(r,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.storage.set("user",e),t.next=3,n.user.sendEmailVerification();case 3:case"end":return t.stop()}}),t,this)})))})).catch((function(e){n.user.delete(),r.msg_networkfailure(),r.storage.remove("user")}));case 6:return t.abrupt("return",n);case 9:t.prev=9,t.t0=t.catch(0),this.msg_networkfailure();case 12:case"end":return t.stop()}}),t,this,[[0,9]])})))}},{key:"msg_networkfailure",value:function(){return Object(f.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertcontroller.create({cssClass:"my-custom-class",header:"Alert",subHeader:"Verification",message:"If your email address is correct please verify your network connection. ",buttons:["Ok"]}).then((function(e){e.present(),e.onDidDismiss().then((function(){}))})).catch((function(e){throw e}));case 2:case"end":return e.stop()}}),e,this)})))}},{key:"verification",value:function(){var e=this;this.afAuth.authState.subscribe((function(t){if(t.emailVerified){var n={state:{order:e.data}};Object(p.isNullOrUndefined)(e.data)?e.router.navigate(["/home"]):e.router.navigate(["/place-order"],n)}}))}},{key:"redirectTo",value:function(){""!==this.data?this.router.navigate(["/place-order"],{state:{product:this.data}}):this.state=!1}}])&&t(r.prototype,i),o&&t(r,o),n}(),o.\u0275fac=function(e){return new(e||o)(h.Ib(d.a),h.Ib(d.g),h.Ib(u.b),h.Ib(b.a),h.Ib(l.Y),h.Ib(m.b),h.Ib(g.a),h.Ib(l.a))},o.\u0275cmp=h.Cb({type:o,selectors:[["app-verification"]],decls:19,vars:1,consts:[["slot","start",2,"margin-top","5%"],["mode","ios",1,"width"],["size","LARGE","color","warning"],["color","danger"],["size","LARGE","name","cart"],["title","app icon","src","assets/icon/lipstick.png",1,"icon"],["id","img","src","assets/images/welcome.gif"],["id","mail_link",1,"paragraph"],[1,"center",3,"click"]],template:function(e,t){1&e&&(h.Nb(0,"ion-header"),h.Nb(1,"ion-toolbar"),h.Jb(2,"ion-buttons",0),h.Nb(3,"ion-title",1),h.Nb(4,"ion-text",2),h.pc(5," K"),h.Mb(),h.Nb(6,"ion-text",3),h.Jb(7,"ion-icon",4),h.Mb(),h.Nb(8,"ion-text"),h.pc(9,"ta"),h.Mb(),h.Jb(10,"img",5),h.Nb(11,"ion-text"),h.pc(12,"og"),h.Mb(),h.Mb(),h.Mb(),h.Mb(),h.Nb(13,"ion-content"),h.Jb(14,"ion-img",6),h.Nb(15,"p",7),h.pc(16),h.Mb(),h.Nb(17,"ion-button",8),h.Vb("click",(function(){return t.verification()})),h.pc(18,"Start Shopping now"),h.Mb(),h.Mb()),2&e&&(h.yb(16),h.rc(" A verification link was sent to your email adress: ",t.credential.mail," please, verify it. "))},directives:[l.u,l.V,l.h,l.U,l.R,l.v,l.q,l.w,l.g],styles:[".icon[_ngcontent-%COMP%]{width:15px;height:23px;border:none;padding:2px}.width[_ngcontent-%COMP%]{font-size:26px}#code[_ngcontent-%COMP%]{display:block;margin:auto;padding-bottom:12%;width:35%}.input[_ngcontent-%COMP%]{font-size:14px;font-weight:bolder;text-align:center}section[_ngcontent-%COMP%]{margin-top:1em;margin-bottom:2.5em}.full-width[_ngcontent-%COMP%] > header[_ngcontent-%COMP%], section[_ngcontent-%COMP%]:not(.full-width){padding:0 10px}.paragraph[_ngcontent-%COMP%]{display:block;padding:20px;margin:5px;font-family:Gill Sans,Gill Sans MT,Calibri,Trebuchet MS,sans-serif;font-size:18px;text-align:justify}.my-custom-class[_ngcontent-%COMP%]{--background:#222;--spinner-color:#fff;color:#fff}.center[_ngcontent-%COMP%]{margin-left:25%;margin-right:25%;padding:auto}"]}),o)}],w=((s=function t(){e(this,t)}).\u0275mod=h.Gb({type:s}),s.\u0275inj=h.Fb({factory:function(e){return new(e||s)},imports:[[d.i.forChild(v)],d.i]}),s),y=((a=function t(){e(this,t)}).\u0275mod=h.Gb({type:a}),a.\u0275inj=h.Fb({factory:function(e){return new(e||a)},imports:[[c.c,u.f,l.W,w,u.m]]}),a)}}])}();