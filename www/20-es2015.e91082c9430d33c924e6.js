(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{tIIa:function(e,t,n){"use strict";n.r(t),n.d(t,"OrderDetailsPageModule",(function(){return k}));var o=n("ofXK"),i=n("3Pt+"),r=n("TEn/"),s=n("tyNb"),c=n("mrSG"),b=n("MCLT"),a=n("fXoL"),d=n("I/3d"),l=n("UbJi"),u=n("e8h1");function p(e,t){if(1&e&&(a.Nb(0,"h5"),a.pc(1),a.Mb()),2&e){const e=a.Xb(2);a.yb(1),a.qc(e.data.shipment.status)}}function h(e,t){1&e&&(a.Nb(0,"ion-badge",18),a.pc(1,"Delivered"),a.Mb())}function g(e,t){if(1&e&&(a.Nb(0,"ion-select-option"),a.pc(1),a.Mb()),2&e){const e=t.$implicit;a.yb(1),a.qc(e.address1)}}function M(e,t){if(1&e){const e=a.Ob();a.Nb(0,"ion-button",19),a.Nb(1,"ion-select",20),a.Vb("ionChange",(function(){a.ic(e);const t=a.Xb(2);return t.changeAddress(t.shippingAddress,t.data.orderId)}))("ngModelChange",(function(t){return a.ic(e),a.Xb(2).shippingAddress=t})),a.nc(2,g,2,1,"ion-select-option",21),a.Mb(),a.Mb()}if(2&e){const e=a.Xb(2);a.yb(1),a.cc("ngModel",e.shippingAddress),a.yb(1),a.cc("ngForOf",e.address)}}function m(e,t){if(1&e){const e=a.Ob();a.Nb(0,"ion-button",22),a.Vb("click",(function(){a.ic(e);const t=a.Xb(2);return t.cancelOrder(t.data)})),a.pc(1,"Cancel Order"),a.Mb()}}function N(e,t){if(1&e){const e=a.Ob();a.Nb(0,"ion-button",23),a.Vb("click",(function(){a.ic(e);const t=a.Xb(2);return t.refunding(t.data)})),a.pc(1,"Ask for Refunds"),a.Jb(2,"ion-spinner",24),a.Mb()}}function f(e,t){if(1&e){const e=a.Ob();a.Nb(0,"div",25),a.Nb(1,"fieldset"),a.Nb(2,"legend"),a.Nb(3,"p"),a.pc(4,"Carrier assigment"),a.Mb(),a.Nb(5,"h6"),a.pc(6,"admin only is authorized to manage carrier"),a.Mb(),a.Mb(),a.Nb(7,"ion-button",26),a.pc(8,"Claim payment"),a.Mb(),a.Nb(9,"div"),a.Nb(10,"ion-select",27),a.Vb("ngModelChange",(function(t){return a.ic(e),a.Xb(2).carrier.name=t})),a.Nb(11,"ion-select-option"),a.pc(12,"UPS"),a.Mb(),a.Nb(13,"ion-select-option"),a.pc(14,"USPS"),a.Mb(),a.Nb(15,"ion-select-option"),a.pc(16,"BPS"),a.Mb(),a.Nb(17,"ion-select-option"),a.pc(18,"DHL Express"),a.Mb(),a.Nb(19,"ion-select-option"),a.pc(20,"Katalog Express"),a.Mb(),a.Mb(),a.Mb(),a.Nb(21,"div"),a.Nb(22,"ion-input",28),a.Vb("ngModelChange",(function(t){return a.ic(e),a.Xb(2).carrier.tracking=t})),a.Mb(),a.Mb(),a.Nb(23,"div"),a.Nb(24,"ion-button",29),a.Vb("click",(function(){a.ic(e);const t=a.Xb(2);return t.setCarrier(t.carrier,t.data.orderId)})),a.pc(25,"Set Carrier"),a.Jb(26,"ion-spinner",30),a.Mb(),a.Mb(),a.Mb(),a.Mb()}if(2&e){const e=a.Xb(2);a.yb(10),a.cc("ngModel",e.carrier.name),a.yb(12),a.cc("ngModel",e.carrier.tracking)}}function y(e,t){if(1&e&&(a.Lb(0),a.Nb(1,"div"),a.Nb(2,"fieldset"),a.Nb(3,"legend"),a.Nb(4,"label"),a.pc(5,"Order Info"),a.Mb(),a.Mb(),a.Nb(6,"ion-grid"),a.Nb(7,"ion-row"),a.Nb(8,"ion-col",12),a.pc(9,"Date Order"),a.Mb(),a.Nb(10,"ion-col"),a.pc(11),a.Yb(12,"date"),a.Mb(),a.Mb(),a.Nb(13,"ion-row"),a.Nb(14,"ion-col",12),a.pc(15,"# Order"),a.Mb(),a.Nb(16,"ion-col"),a.pc(17),a.Yb(18,"currency"),a.Mb(),a.Mb(),a.Nb(19,"ion-row"),a.Nb(20,"ion-col",12),a.pc(21,"Cost Order"),a.Mb(),a.Nb(22,"ion-col"),a.pc(23),a.Yb(24,"currency"),a.Mb(),a.Mb(),a.Mb(),a.Mb(),a.Mb(),a.Nb(25,"div"),a.Nb(26,"fieldset"),a.Nb(27,"legend"),a.Nb(28,"p"),a.pc(29,"Shipment Status"),a.Mb(),a.Mb(),a.Nb(30,"h6"),a.pc(31),a.Mb(),a.Nb(32,"h5"),a.pc(33),a.Mb(),a.Nb(34,"p"),a.pc(35),a.Jb(36,"br"),a.Mb(),a.nc(37,p,2,1,"h5",2),a.nc(38,h,2,0,"ion-badge",13),a.Mb(),a.Mb(),a.Nb(39,"div"),a.Nb(40,"fieldset"),a.Nb(41,"legend"),a.Nb(42,"p"),a.pc(43,"Manage your order"),a.Mb(),a.Mb(),a.nc(44,M,3,2,"ion-button",14),a.nc(45,m,2,0,"ion-button",15),a.nc(46,N,3,0,"ion-button",16),a.Mb(),a.Mb(),a.nc(47,f,27,2,"div",17),a.Jb(48,"div"),a.Kb()),2&e){const e=a.Xb();a.yb(11),a.qc(a.Zb(12,12,e.data.date_order)),a.yb(6),a.qc(a.Zb(18,14,e.data.orderId)),a.yb(6),a.qc(a.Zb(24,16,e.data.amount)),a.yb(8),a.rc("Ship to - ",e.data.shipment.shipping_destination,""),a.yb(2),a.qc(e.data.shipment.carrier),a.yb(2),a.qc(e.data.shipment.trackingnumber),a.yb(2),a.cc("ngIf","Delivered"!==e.data.shipment.status),a.yb(1),a.cc("ngIf","Delivered"==e.data.shipment.status),a.yb(6),a.cc("ngIf","Shipped"!==e.data.shipment.status),a.yb(1),a.cc("ngIf","CANCELLED"!==e.data.shipment.status&&"Shipped"!==e.data.shipment.status&&"Delivered"!==e.data.shipment.status),a.yb(1),a.cc("ngIf","Shipped"!==e.data.shipment.status),a.yb(1),a.cc("ngIf","ADMIN"==e.userType)}}function C(e,t){1&e&&(a.Lb(0),a.Nb(1,"div"),a.Nb(2,"fieldset"),a.Nb(3,"legend"),a.Nb(4,"p"),a.pc(5,"Order Info"),a.Mb(),a.Mb(),a.Nb(6,"ion-row"),a.Nb(7,"ion-col"),a.Nb(8,"h5"),a.pc(9,"Date Order"),a.Mb(),a.Mb(),a.Nb(10,"ion-col"),a.Nb(11,"ion-skeleton-text"),a.Jb(12,"h6"),a.Mb(),a.Mb(),a.Mb(),a.Nb(13,"ion-row"),a.Nb(14,"ion-col"),a.Nb(15,"h5"),a.pc(16,"# Order"),a.Mb(),a.Mb(),a.Nb(17,"ion-col"),a.Nb(18,"ion-skeleton-text"),a.Jb(19,"h6"),a.Mb(),a.Mb(),a.Mb(),a.Nb(20,"ion-row"),a.Nb(21,"ion-col"),a.Nb(22,"h5"),a.pc(23,"Cost Order"),a.Mb(),a.Mb(),a.Nb(24,"ion-col"),a.Nb(25,"ion-skeleton-text"),a.Jb(26,"h6"),a.Mb(),a.Mb(),a.Mb(),a.Mb(),a.Mb(),a.Nb(27,"div"),a.Nb(28,"fieldset"),a.Nb(29,"legend"),a.Nb(30,"p"),a.pc(31,"Shipment Status"),a.Mb(),a.Mb(),a.Nb(32,"ion-skeleton-text"),a.Jb(33,"h5"),a.Mb(),a.Nb(34,"ion-skeleton-text"),a.Jb(35,"p"),a.Mb(),a.Nb(36,"ion-skeleton-text"),a.Jb(37,"h5"),a.Mb(),a.Mb(),a.Mb(),a.Nb(38,"div"),a.Nb(39,"fieldset"),a.Nb(40,"legend"),a.Nb(41,"p"),a.pc(42,"Manage your order"),a.Mb(),a.Mb(),a.Nb(43,"ion-skeleton-text"),a.Nb(44,"ion-button",19),a.Nb(45,"ion-select",31),a.Nb(46,"ion-select-option"),a.pc(47,"Option2"),a.Mb(),a.Mb(),a.Mb(),a.Mb(),a.Nb(48,"ion-skeleton-text"),a.Nb(49,"ion-button",32),a.pc(50,"Cancel order"),a.Mb(),a.Nb(51,"ion-button",33),a.pc(52,"Ask for Refunds"),a.Mb(),a.Nb(53,"ion-button",26),a.pc(54,"Claim payment"),a.Mb(),a.Mb(),a.Nb(55,"ion-skeleton-text"),a.Nb(56,"div"),a.Nb(57,"ion-select",34),a.Nb(58,"ion-select-option"),a.pc(59,"UPS"),a.Mb(),a.Nb(60,"ion-select-option"),a.pc(61,"USPS"),a.Mb(),a.Nb(62,"ion-select-option"),a.pc(63,"BPS"),a.Mb(),a.Nb(64,"ion-select-option"),a.pc(65,"DHL Express"),a.Mb(),a.Nb(66,"ion-select-option"),a.pc(67,"Katalog Express"),a.Mb(),a.Mb(),a.Mb(),a.Mb(),a.Nb(68,"ion-skeleton-text"),a.Nb(69,"div"),a.Jb(70,"ion-button",35),a.Mb(),a.Mb(),a.Mb(),a.Mb(),a.Nb(71,"div"),a.Nb(72,"fieldset"),a.Nb(73,"legend"),a.Nb(74,"p"),a.pc(75,"Payment Method"),a.Mb(),a.Mb(),a.Nb(76,"ion-row"),a.Nb(77,"ion-skeleton-text"),a.Nb(78,"ion-col"),a.Jb(79,"h6"),a.Mb(),a.Mb(),a.Nb(80,"ion-skeleton-text"),a.Nb(81,"ion-col"),a.Jb(82,"h6"),a.Mb(),a.Mb(),a.Mb(),a.Nb(83,"ion-row"),a.Nb(84,"ion-skeleton-text"),a.Nb(85,"h4"),a.pc(86,"Billing address"),a.Mb(),a.Nb(87,"p"),a.pc(88,"Lorem ipsum dolor sit amet consectetur adipisicing elit. Voluptates vitae sit consectetur! Hic, tempore nihil! Quaerat tenetur vitae magnam quae? Odio a ullam ipsum voluptatibus rem mollitia, quia totam labore?"),a.Mb(),a.Mb(),a.Mb(),a.Mb(),a.Mb(),a.Kb())}const O=[{path:"",component:(()=>{class e{constructor(e,t,n,o,i,r){this.route=e,this.router=t,this.afirestore=n,this.fireAuth=o,this.alertcontroller=i,this.storage=r,this.shippingAddress="",this.userType="",this.carrier={name:"",tracking:""},this.nodata=!0,this.msg={},this.getAdresses()}ngOnInit(){this.route.queryParams.subscribe(e=>{this.router.getCurrentNavigation().extras.state&&(this.data=this.router.getCurrentNavigation().extras.state.order,this.userType=this.router.getCurrentNavigation().extras.state.type)}),this.nodata=!!Object(b.isNullOrUndefined)(this.data)}getAdresses(){this.storage.get("address").then(e=>{this.address=e}).catch(e=>{console.log("addresses not found or empty")})}changeAddress(e,t){return Object(c.a)(this,void 0,void 0,(function*(){this.msg.author=(yield this.fireAuth.currentUser).uid,this.msg.object="ORDER_UPDATE",this.msg.content=e,this.msg.destination="ADMIN",this.msg.date_msg=new Date(Date.now()),this.afirestore.collection("messages").add(this.msg),this.afirestore.collection("message").doc("ADMIN_ONE").collection("update").add(this.msg).then(()=>Object(c.a)(this,void 0,void 0,(function*(){const t=yield this.alertcontroller.create({cssClass:"my-custom-class",header:"Alert",subHeader:"Subtitle",message:"Shipping address will change to."+e+" please verify your message box for confirmation",buttons:["Ok"]});yield t.present()})))}))}cancelOrder(e){return Object(c.a)(this,void 0,void 0,(function*(){let t=(yield this.fireAuth.currentUser).uid;const n=yield this.alertcontroller.create({cssClass:"my-custom-class",header:"Alert",subHeader:"Cancel Order",message:"Do you really want to cancel order."+e.orderId,buttons:[{text:"OK",cssClass:"",handler:n=>{this.afirestore.collection("orders").doc(t).collection("customer_order").doc(e.orderId).update({"shipment.status":"CANCELLED"}).then(()=>{this.data.shipment.status="User is cancelling the order"}).catch(e=>{this.msgFaillure(e)})}},{text:"Cancel",cssClass:"my-custom-class"}]});yield n.present()}))}refunding(e){return Object(c.a)(this,void 0,void 0,(function*(){document.getElementById("spin2").setAttribute("hidden","false");let t=(yield this.fireAuth.currentUser).uid;const n=yield this.alertcontroller.create({cssClass:"my-custom-class",header:"Alert",subHeader:"Assign carrier",message:"By starting a refund process you have to return back the purchased item. please contact customer services for support. ",buttons:[{text:"OK",cssClass:"",handler:n=>{this.afirestore.collection("orders").doc(t).collection("customer_order").doc(e.orderId).update({"shipment.status":"REFUNDS"}).then(()=>{document.getElementById("spin2").setAttribute("hidden","true"),this.data.shipment.status="Refunds process started"}).catch(e=>{this.msgFaillure(e),document.getElementById("spin2").setAttribute("hidden","true")})}},{text:"Cancel",cssClass:"my-custom-class"}]});yield n.present()}))}setCarrier(e,t){return Object(c.a)(this,void 0,void 0,(function*(){if(""!==e.name&&""!==e.tracking&&null!==e.name&&null!==e.tracking){document.getElementById("spin").setAttribute("hidden","false");let n=(yield this.fireAuth.currentUser).uid;const o=yield this.alertcontroller.create({cssClass:"my-custom-class",header:"Alert",subHeader:"Assign carrier",message:"Once you validate item will be shipped by carrier "+e.name,buttons:[{text:"OK",cssClass:"",handler:o=>{this.afirestore.collection("orders").doc(n).collection("customer_order").doc(t).update({"shipment.status":"Shipped","shipment.carrier":e.name,"shipment.tracking":e.tracking}).then(()=>{document.getElementById("spin").setAttribute("hidden","true"),this.data.shipment.status="Shipped"}).catch(e=>{this.msgFaillure(e),document.getElementById("spin").setAttribute("hidden","true")})}},{text:"Cancel",cssClass:"my-custom-class"}]});yield o.present()}else this.msgFaillure("No tracking number or carrier set")}))}msgFaillure(e){return Object(c.a)(this,void 0,void 0,(function*(){const t=yield this.alertcontroller.create({cssClass:"my-custom-class",header:"Alert",subHeader:"Assign carrier",message:"Operation failed"+e,buttons:["OK"]});yield t.present()}))}}return e.\u0275fac=function(t){return new(t||e)(a.Ib(s.a),a.Ib(s.g),a.Ib(d.a),a.Ib(l.a),a.Ib(r.a),a.Ib(u.b))},e.\u0275cmp=a.Cb({type:e,selectors:[["app-order-details"]],decls:29,vars:2,consts:[["mode","ios"],["slot","start",2,"margin-top","5%"],[4,"ngIf"],["color","dark"],["routerLink","/home","routerDirection","forward"],["name","home-outline"],["routerLink","/cart","routerDirection","forward"],["name","cart-outline"],["routerLink","/account","routerDirection","forward"],["name","person-circle-outline"],["routerLink","/order","routerDirection","forward"],["name","cube-outline"],["size","8"],["color","success",4,"ngIf"],["color","medium",4,"ngIf"],["color","danger",3,"click",4,"ngIf"],["color","warning",3,"click",4,"ngIf"],["name","admin_purposes",4,"ngIf"],["color","success"],["color","medium"],["placeholder","Change shipping address",3,"ngModel","ionChange","ngModelChange"],[4,"ngFor","ngForOf"],["color","danger",3,"click"],["color","warning",3,"click"],["id","spin2","hidden","true"],["name","admin_purposes"],["color","tertiary"],["placeholder","Assign a carrier",3,"ngModel","ngModelChange"],["type","text","placeholder","Carrier tracking number",3,"ngModel","ngModelChange"],["color","secondary",3,"click"],["id","spin","hidden","true"],["placeholder","Change shipping address"],["color","danger"],["color","warning"],["placeholder","Assign a carrier"],["color","secondary"]],template:function(e,t){1&e&&(a.Nb(0,"ion-header",0),a.Nb(1,"ion-toolbar"),a.Nb(2,"ion-buttons",1),a.Jb(3,"ion-back-button"),a.Mb(),a.Nb(4,"ion-title"),a.pc(5,"Order Details"),a.Mb(),a.Mb(),a.Mb(),a.Nb(6,"ion-content"),a.nc(7,y,49,18,"ng-container",2),a.nc(8,C,89,0,"ng-container",2),a.Mb(),a.Nb(9,"ion-footer"),a.Nb(10,"ion-toolbar"),a.Nb(11,"ion-tabs"),a.Nb(12,"ion-tab-bar",3),a.Nb(13,"ion-tab-button",4),a.Jb(14,"ion-icon",5),a.Nb(15,"ion-label"),a.pc(16,"Home"),a.Mb(),a.Mb(),a.Nb(17,"ion-tab-button",6),a.Jb(18,"ion-icon",7),a.Nb(19,"ion-label"),a.pc(20,"Cart"),a.Mb(),a.Mb(),a.Nb(21,"ion-tab-button",8),a.Jb(22,"ion-icon",9),a.Nb(23,"ion-label"),a.pc(24,"Profil"),a.Mb(),a.Mb(),a.Nb(25,"ion-tab-button",10),a.Jb(26,"ion-icon",11),a.Nb(27,"ion-label"),a.pc(28,"Order"),a.Mb(),a.Mb(),a.Mb(),a.Mb(),a.Mb(),a.Mb()),2&e&&(a.yb(7),a.cc("ngIf",!t.nodata),a.yb(1),a.cc("ngIf",t.nodata))},directives:[r.u,r.V,r.h,r.d,r.e,r.U,r.q,o.m,r.s,r.Q,r.O,r.P,r.db,s.h,r.v,r.B,r.t,r.G,r.p,r.f,r.g,r.I,r.eb,i.i,i.l,o.l,r.J,r.N,r.x,r.fb,r.K],pipes:[o.f,o.d],styles:["ion-content[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:13px}ion-content[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin-top:1px;margin-bottom:1px;padding-top:0;padding-bottom:0}ion-content[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:12px}ion-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{padding-top:2px;margin-top:2px;margin-bottom:2px;font-size:14px}ion-content[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{text-align:justify;border-top:3px solid #eee;border-bottom:3px solid #eee}ion-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:700}ion-content[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%]{border-radius:10%}ion-content[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:80%;height:40px;margin-top:auto;margin-left:10%;margin-right:10%;padding:auto;font-family:Courier New,Courier,monospace;font-weight:700}"]}),e})()}];let v=(()=>{class e{}return e.\u0275mod=a.Gb({type:e}),e.\u0275inj=a.Fb({factory:function(t){return new(t||e)},imports:[[s.i.forChild(O)],s.i]}),e})(),k=(()=>{class e{}return e.\u0275mod=a.Gb({type:e}),e.\u0275inj=a.Fb({factory:function(t){return new(t||e)},imports:[[o.c,i.f,r.W,v]]}),e})()}}]);